DEBUG                                                                                                         PAGE 1

                       1    $MOD51
                       2    $DEBUG
                       3    
                =1     4    $include (lift.inc)
                =1     5    ; adresy I/O portov, ktore pridu na port P2 89C52-ky
  0080          =1     6    i8255INA        equ     080h
  0081          =1     7    i8255INB        equ     081h
  0082          =1     8    i8255INC        equ     082h
  0083          =1     9    i8255INCW       equ     083h
  00C0          =1    10    i8255OUTA       equ     0c0h
  00C1          =1    11    i8255OUTB       equ     0c1h
  00C2          =1    12    i8255OUTC       equ     0c2h
  00C3          =1    13    i8255OUTCW      equ     0c3h
                =1    14    
  0028          =1    15    INPORTA         data    28h         ; nutne kvoli emulatoru!!!
  0021          =1    16    INPORTB         data    21h
  0022          =1    17    INPORTC         data    22h
  0023          =1    18    OUTPORTA        data    23h
  0024          =1    19    OUTPORTB        data    24h
  0025          =1    20    OUTPORTC        data    25h
  0026          =1    21    INPORTBold      data    26h
  0027          =1    22    CTRLREG         data    27h
                =1    23    
  0030          =1    24    POSITION        data    30h
  0031          =1    25    LOWEST          data    31h
  0032          =1    26    HIGHEST         data    32h
  0033          =1    27    STOPTIMER       data    33h
  0034          =1    28    OUTPORTBold     data    34h
                =1    29    
  0040          =1    30    STOPNOT         bit     INPORTA.0
  0041          =1    31    PKI1            bit     INPORTA.1
  0042          =1    32    PKI2            bit     INPORTA.2
  0043          =1    33    PKI3            bit     INPORTA.3
  0044          =1    34    PKI4            bit     INPORTA.4
  0045          =1    35    DOORCLSD        bit     INPORTA.5 
                =1    36    
  0009          =1    37    MB1             bit     INPORTB.1       ; clonky maju invertovanu logiku
  000A          =1    38    MB2             bit     INPORTB.2
  000B          =1    39    SKRH            bit     INPORTB.3
  000C          =1    40    SKRD            bit     INPORTB.4
  000D          =1    41    DP              bit     INPORTB.5
  000E          =1    42    DPZK            bit     INPORTB.6
  000F          =1    43    DPK             bit     INPORTB.7
                =1    44    
  0031          =1    45    MB1old          bit     INPORTBold.1
  0032          =1    46    MB2old          bit     INPORTBold.2
  0033          =1    47    SKRHold         bit     INPORTBold.3
  0034          =1    48    SKRDold         bit     INPORTBold.4
                =1    49    
  0010          =1    50    PI1             bit     INPORTC.0
  0011          =1    51    PI2D            bit     INPORTC.1
  0012          =1    52    PI2U            bit     INPORTC.2
  0013          =1    53    PI3D            bit     INPORTC.3
  0014          =1    54    PI3U            bit     INPORTC.4
  0015          =1    55    PI4             bit     INPORTC.5
                =1    56    
  0018          =1    57    KS              bit     OUTPORTA.0
  0019          =1    58    PKO1            bit     OUTPORTA.1
DEBUG                                                                                                         PAGE 2

  001A          =1    59    PKO2            bit     OUTPORTA.2
  001B          =1    60    PKO3            bit     OUTPORTA.3
  001C          =1    61    PKO4            bit     OUTPORTA.4
                =1    62    
  0020          =1    63    UP              bit     OUTPORTB.0
  0021          =1    64    DOWN            bit     OUTPORTB.1
  0022          =1    65    FAST            bit     OUTPORTB.2
  0023          =1    66    SLOW            bit     OUTPORTB.3
  0024          =1    67    FLED1           bit     OUTPORTB.4
  0025          =1    68    FLED2           bit     OUTPORTB.5
  0026          =1    69    FLED3           bit     OUTPORTB.6
  0027          =1    70    FLED4           bit     OUTPORTB.7
                =1    71    
  0028          =1    72    PO1             bit     OUTPORTC.0
  0029          =1    73    PO2D            bit     OUTPORTC.1
  002A          =1    74    PO2U            bit     OUTPORTC.2
  002B          =1    75    PO3D            bit     OUTPORTC.3
  002C          =1    76    PO3U            bit     OUTPORTC.4
  002D          =1    77    PO4             bit     OUTPORTC.5
  002E          =1    78    LEDD            bit     OUTPORTC.6
  002F          =1    79    LEDU            bit     OUTPORTC.7
                =1    80    
  0038          =1    81    CANGO           bit     CTRLREG.0
  0039          =1    82    DOORCLSDold     bit     CTRLREG.1
  003A          =1    83    UPold           bit     CTRLREG.2
  003B          =1    84    DOWNold         bit     CTRLREG.3
  003C          =1    85    FASTold         bit     CTRLREG.4
  003D          =1    86    SLOWold         bit     CTRLREG.5
                =1    87    
  00B6          =1    88    WRNOT           bit     0b6h        ; p3.6
  00B7          =1    89    RDNOT           bit     0b7h        ; p3.7
                =1    90    
                =1    91    ; bitove masky
                =1    92    ; 8255OUT 
                =1    93    ; port A
  0001          =1    94    bmKS              equ    00000001b
  0002          =1    95    bmPKO1            equ    00000010b
  0004          =1    96    bmPKO2            equ    00000100b
  0008          =1    97    bmPKO3            equ    00001000b
  0010          =1    98    bmPKO4            equ    00010000b
                =1    99    
                =1   100    ; port B
  0001          =1   101    bmUP              equ    00000001b
  0002          =1   102    bmDOWN            equ    00000010b
  0004          =1   103    bmFAST            equ    00000100b
  0008          =1   104    bmSLOW            equ    00001000b
  0010          =1   105    bmFLED1           equ    00010000b
  0020          =1   106    bmFLED2           equ    00100000b
  0040          =1   107    bmFLED3           equ    01000000b
  0080          =1   108    bmFLED4           equ    10000000b
                =1   109    
                =1   110    ; port C
  0001          =1   111    bmPO1             equ    00000001b
  0002          =1   112    bmPO2D            equ    00000010b
  0004          =1   113    bmPO2U            equ    00000100b
  0008          =1   114    bmPO3D            equ    00001000b
  0010          =1   115    bmPO3U            equ    00010000b
  0020          =1   116    bmPO4             equ    00100000b
DEBUG                                                                                                         PAGE 3

  0040          =1   117    bmLEDD            equ    01000000b
  0080          =1   118    bmLEDU            equ    10000000b
                =1   119    
                =1   120    ; 8255IN
                =1   121    ; port A
  0001          =1   122    bmSTOP            equ    00000001b
  0002          =1   123    bmPKI1            equ    00000010b
  0004          =1   124    bmPKI2            equ    00000100b
  0008          =1   125    bmPKI3            equ    00001000b
  0010          =1   126    bmPKI4            equ    00010000b
  0020          =1   127    bmDOORCLSD        equ    00100000b
                =1   128    
                =1   129    ; port B
  0002          =1   130    bmMB1I            equ    00000010b
  0004          =1   131    bmMB2I            equ    00000100b
  0008          =1   132    bmSKRHI           equ    00001000b
  0010          =1   133    bmSKRHD           equ    00010000b
  0020          =1   134    bmDPI             equ    00100000b
  0040          =1   135    bmDPZKI           equ    01000000b
  0080          =1   136    bmDPKI            equ    10000000b
                =1   137    
                =1   138    ; port C
  0001          =1   139    bmPI1             equ    00000001b
  0002          =1   140    bmPI2D            equ    00000010b
  0004          =1   141    bmPI2U            equ    00000100b
  0008          =1   142    bmPI3D            equ    00001000b
  0010          =1   143    bmPI3U            equ    00010000b
  0020          =1   144    bmPI4             equ    00100000b
                =1   145    
                     146    
                     147    _BP_    MACRO 
                     148            clr     P3.3
                     149            setb    EX1
                     150            nop
                     151            nop
                     152    ENDM
                     153    
                     154    POLOHA_LED  MACRO  POLOHA
                     155            clr     LEDU            
                     156            clr     LEDD 
                     157            clr     FLED1             
                     158            clr     FLED2                
                     159            clr     FLED3           
                     160            clr     FLED4           
                     161            setb    FLED&POLOHA
                     162            lcall   WRITEPORTS
                     163    ENDM
                     164    
  0036               165    FLOORREQ        data    36h
                     166    
                     167    ; hodiny oscilatora v emulatore treba dat na ext a nastavit 11.0592MHz
  00FA               168    TIMERCONST      equ     250     ; udaj pre nastavenie casovaca pre potreby seriovej komunika
                                                                               cie
                     169                                    ; hodnota 250 znamena prenosovu rychlost 4800 baud pri oscil
                                                                               atore 11.0592MHz
                     170                                    ; nastavenie terminalu je 4800 8-N-1, no flow control
                     171    ;osetrenie vektorov preruseni
0000                 172            org     0000h           ; adresa odkial startuje program po resete
DEBUG                                                                                                         PAGE 4

0000 020033          173            ljmp    START           ; skok na zaciatok kodu programu
                     174                  
0033                 175            org     0033h           ; od tejto adresy sa zacina kod programu
0033                 176    START:
0033                 177    RESET:  
                     178            ; riadiace signaly do pasivnej urovne 
0033 D2B6            179            setb    WRNOT
0035 D2B7            180            setb    RDNOT
0037 753300          181            mov     STOPTIMER, #0
003A 758140          182            mov     SP, #STACK
                     183    
                     184            ; pockame si na inicializaciu obvodov 8255  
003D 7900            185            mov     R1, #0 
003F 7AFF            186            mov     R2, #0ffh
0041 D9FE            187            djnz    R1, $
0043 DAFC            188            djnz    R2, $-2
                     189            
                     190            ; teraz ich mozeme nastavit
0045 75809B          191            mov     p0, #10011011b      ; nastavenie i8255IN - vsetky porty dnu
0048 75A083          192            mov     p2, #i8255INCW
004B C2B6            193            clr     WRNOT
004D 00              194            nop
004E 00              195            nop
004F 00              196            nop
0050 00              197            nop
0051 D2B6            198            setb    WRNOT
0053 758080          199            mov     p0, #10000000b      ; nastavenie i8255OUT - vsetky porty von
0056 75A0C3          200            mov     p2, #i8255OUTCW
0059 C2B6            201            clr     WRNOT
005B 00              202            nop
005C 00              203            nop
005D 00              204            nop
005E 00              205            nop
005F D2B6            206            setb    WRNOT
                     207            
                     208 +1         _BP_
0061 C2B3            209 +1         clr     P3.3
0063 D2AA            210 +1         setb    EX1
0065 00              211 +1         nop
0066 00              212 +1         nop
                     214    
                     215            ; pociatocna inicializacia - vynuluj vstupne registre a rozsviet vsetky diody 
0067 752800          216            mov     INPORTA, #0
006A 75211E          217            mov     INPORTB, #01eh      ; vsetky clonky pasivne
006D 752200          218            mov     INPORTC, #0
0070 75231E          219            mov     OUTPORTA, #(bmPKO1 or bmPKO2 or bmPKO3 or bmPKO4)
0073 7524F0          220            mov     OUTPORTB, #(bmFLED1 or bmFLED2 or bmFLED3 or bmFLED4)
0076 7525FF          221            mov     OUTPORTC, #(bmPO1 or bmPO2D or bmPO2U or bmPO3D or bmPO3U or bmPO4 or bmLEDD
                                                                                or bmLEDU)
0079 D218            222            setb    KS
007B 12034A          223            call    WRITEPORTS          ; zapis novu informaciu
                     224    ;;;;;;;;
                     225    
007E 752300          226            mov     OUTPORTA, #0
0081 752400          227            mov     OUTPORTB, #0
0084 752500          228            mov     OUTPORTC, #0
0087 12034A          229            call    WRITEPORTS          ; zapis novu informaciu
                     230    
DEBUG                                                                                                         PAGE 5

008A 752800          231            mov     INPORTA, #0
008D 752100          232            mov     INPORTB, #0         
0090 752200          233            mov     INPORTC, #0
0093 12030D          234            call    READPORTS           ; prvotne nacitanie udajov
                     235    
0096                 236    CALIB:
                     237            ;kalibracia vytahu podla dolnej porovnavacej clonky
0096 12030D          238            lcall   READPORTS                   ; precitaj, co je na portoch
0099 300C0F          239            jnb     SKRD, CALIBEND              ; ak sme na dolnej porovnavacej clonke, tak koni
                                                                               ec
009C D221            240            setb    DOWN                        ; inak pod dole
009E D222            241            setb    FAST                        ; a rychlo
00A0 12034A          242            lcall   WRITEPORTS                  ; zapis informaciu 
00A3                 243    CALIBLOOP:
00A3 12030D          244            lcall   READPORTS                   ; 
00A6 300C02          245            jnb     SKRD, CALIBEND              ; ak sme dole, konci
                     246            ;jnb     MB2, CALIBEND               ; ak sme na poschodi, konci
00A9 80F8            247            jmp     CALIBLOOP
00AB                 248    CALIBEND:
00AB 753600          249            mov     FLOORREQ, #0                                
00AE C222            250            clr     FAST                        ; stojime
00B0 C221            251            clr     DOWN                        ;
00B2 D224            252            setb    FLED1
00B4 12034A          253            lcall   WRITEPORTS                  ; zapis informaciu
                     254 +1         _BP_
00B7 C2B3            255 +1         clr     P3.3
00B9 D2AA            256 +1         setb    EX1
00BB 00              257 +1         nop
00BC 00              258 +1         nop
00BD                 260    MAIN:
                     261    
                     262    ;            |  7    |  6    |  5    |  4    |  3    |  2    |  1    |  0    |
                     263    ; ****************************************************************************
                     264    ; INPORTA >  |       |       |DOORCLS| PKI4  | PKI3  | PKI2  | PKI1  |STOPNOT|
                     265    ; ----------------------------------------------------------------------------
                     266    ; INPORTB >  | DPK   | DPZK  | DP    | SKRD  | SKRH  | MB2   | MB1   |       |
                     267    ; ----------------------------------------------------------------------------
                     268    ; INPORTC >  |       |       | PI4   | PI3D  | PI3U  | PI2D  | PI2U  | PI1   |
                     269    ; ****************************************************************************
                     270    ; OUTPORTA > |       |       |       | PKO4  | PKO3  | PKO2  | PKO1  | KS    |
                     271    ; ----------------------------------------------------------------------------
                     272    ; OUTPORTB > | FLED4 | FLED3 | FLED2 | FLED1 | SLOW  | FAST  | DOWN  | UP    |
                     273    ; ----------------------------------------------------------------------------
                     274    ; OUTPORTC > | LEDU  | LEDD  | PO4   | PO3D  | PO3U  | PO2D  | PO2U  | PO1   |
                     275    ; ****************************************************************************
                     276    ; POSITION
                     277    ; ****************************************************************************
                     278    
                     279    
                     280    ;------------------------------------------------------------------------------- << 1. posch
                                                                               odie >>
                     281    
00BD                 282    FLOOR1:
                     283 +1                 POLOHA_LED 1  ;-; Zhasni LEDKY,uz sme na poschodi (aj na paneli "Poloha kabi
                                                                               ny", nechaj len aktualne poschodie)
00BD C22F            284 +1         clr     LEDU            
00BF C22E            285 +1         clr     LEDD 
00C1 C224            286 +1         clr     FLED1             
DEBUG                                                                                                         PAGE 6

00C3 C225            287 +1         clr     FLED2                
00C5 C226            288 +1         clr     FLED3           
00C7 C227            289 +1         clr     FLED4           
00C9 D224            290 +1         setb    FLED1
00CB 12034A          291 +1         lcall   WRITEPORTS
00CE 1202FC          293            lcall   WAITFORTIMER    ; simulacia TIMERu
00D1 12030D          294    F1S:    lcall   READPORTS     ;-; nacitanie dat
00D4 C219            295            clr     PKO1          ;-; vynulovanie volby poschodia na ktorom stojim
00D6 12034A          296            lcall   WRITEPORTS      ;
00D9 E528            297            mov     A, INPORTA      ; zistenie, cibolo stlacene nieco viac ako poschodie na ktor
                                                                               om stojim
00DB 541C            298            anl     A, #00011100b ;-;
00DD 60F2            299            jz      F1S           ;-; ak nie, opakuj
00DF D220            300            setb    UP              ; rychly pohyb hore
00E1 D222            301            setb    FAST            ; 
00E3 12034A          302            lcall   WRITEPORTS      ; 
00E6 0200E9          303            jmp     UP1           ;-; prejdi do stavu UP1
00E9                 304    UP1:
                     305 +1                 POLOHA_LED 1  ;-; Zhasni LEDKY,uz sme na poschodi (aj na paneli "Poloha kabi
                                                                               ny", nechaj len aktualne poschodie)
00E9 C22F            306 +1         clr     LEDU            
00EB C22E            307 +1         clr     LEDD 
00ED C224            308 +1         clr     FLED1             
00EF C225            309 +1         clr     FLED2                
00F1 C226            310 +1         clr     FLED3           
00F3 C227            311 +1         clr     FLED4           
00F5 D224            312 +1         setb    FLED1
00F7 12034A          313 +1         lcall   WRITEPORTS
00FA 12030D          315            lcall   READPORTS       ; nacitanie dat
00FD 200AE9          316            jb      MB2, UP1      ;-; mame uz 1. spomalovaciu clonku?
0100 12030D          317            lcall   READPORTS       ; ak ano, sme z nej uz prec?
0103 300AFA          318            jnb     MB2, $-3        ;       
0106 D22E            319            setb    LEDD            ; Ak ano, rozsviet LEDku, ze mame prvu MB2 mame za sebou
0108 12034A          320            lcall   WRITEPORTS      ;
010B 02010E          321            jmp     UP1_MB2       ;-; a prejdi do stavu UP1_MB2
010E                 322    UP1_MB2:
010E 12030D          323            lcall   READPORTS       ; nacitanie dat
0111 200AFA          324            jb      MB2, UP1_MB2  ;-; mame uz aj druhu spomalovaciu clonku?          
0114 D22F            325            setb    LEDU            ; Ak ano, rozsviet LEDku, ze mame druhu MB2
0116 12034A          326            lcall   WRITEPORTS      ;
0119 02011C          327            jmp     UP1_MB1       ;-; a prejdi do stavu UP1_MB1 
011C                 328    UP1_MB1:
011C 12030D          329            lcall   READPORTS       ; nacitanie dat
011F 2009FA          330            jb      MB1, UP1_MB1  ;-; Sme na zastavovacej clonke?
0122 E528            331            mov     A, INPORTA      ; Ak ano, chceme tu zastavit? - je toto poschodie zvolene?
0124 5404            332            anl     A, #00000100b ;-;
0126 6036            333            jz      UP2           ;-; Ak nie, chod do stavu UP2
0128 C220            334            clr     UP              ; zastav motor
012A C222            335            clr     FAST            ; 
012C 12034A          336            lcall   WRITEPORTS      ; 
012F 020132          337            jmp     FLOOR2        ;-; a prejdi do stavu FLOOR2
                     338    
                     339    ;------------------------------------------------------------------------------- << 2. posch
                                                                               odie >>
                     340    
0132                 341    FLOOR2:
                     342 +1                 POLOHA_LED 2  ;-; Zhasni LEDKY,uz sme na poschodi (aj na paneli "Poloha kabi
                                                                               ny", nechaj len aktualne poschodie)
DEBUG                                                                                                         PAGE 7

0132 C22F            343 +1         clr     LEDU            
0134 C22E            344 +1         clr     LEDD 
0136 C224            345 +1         clr     FLED1             
0138 C225            346 +1         clr     FLED2                
013A C226            347 +1         clr     FLED3           
013C C227            348 +1         clr     FLED4           
013E D225            349 +1         setb    FLED2
0140 12034A          350 +1         lcall   WRITEPORTS
0143 1202FC          352            lcall   WAITFORTIMER    ; simulacia TIMERu
0146 12030D          353    F2S:    lcall   READPORTS     ;-; nacitanie dat
0149 C21A            354            clr     PKO2          ;-; vynulovanie volby poschodia na ktorom stojim
014B 12034A          355            lcall   WRITEPORTS      ;
014E E528            356            mov     A, INPORTA      ; zistenie, cibolo stlacene nieco viac ako poschodie na ktor
                                                                               om stojim
0150 5418            357            anl     A, #00011000b ;-;
0152 60F2            358            jz      F2S           ;-; ak nie, opakuj
0154 D220            359            setb    UP              ; rychly pohyb hore
0156 D222            360            setb    FAST            ; 
0158 12034A          361            lcall   WRITEPORTS      ; 
015B 02015E          362            jmp     UP2           ;-; prejdi do stavu UP2        
015E                 363    UP2:
                     364 +1                 POLOHA_LED 2  ;-; Zhasni LEDKY,uz sme na poschodi (aj na paneli "Poloha kabi
                                                                               ny", nechaj len aktualne poschodie)
015E C22F            365 +1         clr     LEDU            
0160 C22E            366 +1         clr     LEDD 
0162 C224            367 +1         clr     FLED1             
0164 C225            368 +1         clr     FLED2                
0166 C226            369 +1         clr     FLED3           
0168 C227            370 +1         clr     FLED4           
016A D225            371 +1         setb    FLED2
016C 12034A          372 +1         lcall   WRITEPORTS
016F 12030D          374            lcall   READPORTS       ; nacitanie dat
0172 200AE9          375            jb      MB2, UP2      ;-; mame uz 1. spomalovaciu clonku?
0175 12030D          376            lcall   READPORTS       ; ak ano, sme z nej uz prec?
0178 300AFA          377            jnb     MB2, $-3        ;       
017B D22E            378            setb    LEDD            ; Ak ano, rozsviet LEDku, ze mame prvu MB2 mame za sebou
017D 12034A          379            lcall   WRITEPORTS      ;
0180 020183          380            jmp     UP2_MB2       ;-; a prejdi do stavu UP2_MB2
0183                 381    UP2_MB2:
0183 12030D          382            lcall   READPORTS       ; nacitanie dat
0186 200AFA          383            jb      MB2, UP2_MB2  ;-; mame uz aj druhu spomalovaciu clonku?          
0189 D22F            384            setb    LEDU            ; Ak ano, rozsviet LEDku, ze mame druhu MB2
018B 12034A          385            lcall   WRITEPORTS      ;
018E 020191          386            jmp     UP2_MB1       ;-; a prejdi do stavu UP2_MB1 
0191                 387    UP2_MB1:
0191 12030D          388            lcall   READPORTS       ; nacitanie dat
0194 2009FA          389            jb      MB1, UP2_MB1  ;-; Sme na zastavovacej clonke?
0197 E528            390            mov     A, INPORTA      ; Ak ano, chceme tu zastavit? - je toto poschodie zvolene?
0199 5408            391            anl     A, #00001000b ;-;
019B 6036            392            jz      UP3           ;-; Ak nie, chod do stavu UP3
019D C220            393            clr     UP              ; zastav motor
019F C222            394            clr     FAST            ; 
01A1 12034A          395            lcall   WRITEPORTS      ; 
01A4 0201A7          396            jmp     FLOOR3        ;-; a prejdi do stavu FLOOR3
                     397    
                     398    ;------------------------------------------------------------------------------- << 3. posch
                                                                               odie >>
                     399    
DEBUG                                                                                                         PAGE 8

01A7                 400    FLOOR3:
                     401 +1                 POLOHA_LED 3  ;-; Zhasni LEDKY,uz sme na poschodi (aj na paneli "Poloha kabi
                                                                               ny", nechaj len aktualne poschodie)
01A7 C22F            402 +1         clr     LEDU            
01A9 C22E            403 +1         clr     LEDD 
01AB C224            404 +1         clr     FLED1             
01AD C225            405 +1         clr     FLED2                
01AF C226            406 +1         clr     FLED3           
01B1 C227            407 +1         clr     FLED4           
01B3 D226            408 +1         setb    FLED3
01B5 12034A          409 +1         lcall   WRITEPORTS
01B8 1202FC          411            lcall   WAITFORTIMER    ; simulacia TIMERu
01BB 12030D          412    F3S:    lcall   READPORTS     ;-; nacitanie dat
01BE C21B            413            clr     PKO3          ;-; vynulovanie volby poschodia na ktorom stojim
01C0 12034A          414            lcall   WRITEPORTS      ;
01C3 E528            415            mov     A, INPORTA      ; zistenie, cibolo stlacene nieco viac ako poschodie na ktor
                                                                               om stojim
01C5 5410            416            anl     A, #00010000b ;-;
01C7 60F2            417            jz      F3S           ;-; ak nie, opakuj
01C9 D220            418            setb    UP              ; rychly pohyb hore
01CB D222            419            setb    FAST            ; 
01CD 12034A          420            lcall   WRITEPORTS      ; 
01D0 0201D3          421            jmp     UP3           ;-; prejdi do stavu UP3        
01D3                 422    UP3:
                     423 +1                 POLOHA_LED 3  ;-; Zhasni LEDKY,uz sme na poschodi (aj na paneli "Poloha kabi
                                                                               ny", nechaj len aktualne poschodie)
01D3 C22F            424 +1         clr     LEDU            
01D5 C22E            425 +1         clr     LEDD 
01D7 C224            426 +1         clr     FLED1             
01D9 C225            427 +1         clr     FLED2                
01DB C226            428 +1         clr     FLED3           
01DD C227            429 +1         clr     FLED4           
01DF D226            430 +1         setb    FLED3
01E1 12034A          431 +1         lcall   WRITEPORTS
01E4 12030D          433            lcall   READPORTS       ; nacitanie dat
01E7 200AE9          434            jb      MB2, UP3      ;-; mame uz 1. spomalovaciu clonku?
01EA 12030D          435            lcall   READPORTS       ; ak ano, sme z nej uz prec?
01ED 300AFA          436            jnb     MB2, $-3        ;       
01F0 D22E            437            setb    LEDD            ; Ak ano, rozsviet LEDku, ze mame prvu MB2 mame za sebou
01F2 12034A          438            lcall   WRITEPORTS      ;
01F5 0201F8          439            jmp     UP3_MB2       ;-; a prejdi do stavu UP3_MB2
01F8                 440    UP3_MB2:
01F8 12030D          441            lcall   READPORTS       ; nacitanie dat
01FB 200AFA          442            jb      MB2, UP3_MB2  ;-; mame uz aj druhu spomalovaciu clonku?          
01FE D22F            443            setb    LEDU            ; Ak ano, rozsviet LEDku, ze mame druhu MB2
0200 12034A          444            lcall   WRITEPORTS      ;
0203 020206          445            jmp     UP3_MB1       ;-; a prejdi do stavu UP3_MB1 
0206                 446    UP3_MB1:
0206 12030D          447            lcall   READPORTS       ; nacitanie dat
0209 2009FA          448            jb      MB1, UP3_MB1  ;-; Sme na zastavovacej clonke? (tu zastavujeme v kazdom pripa
                                                                               de)
020C C220            449            clr     UP              ; zastav motor
020E C222            450            clr     FAST            ; 
0210 12034A          451            lcall   WRITEPORTS      ; 
0213 02025E          452            jmp     FLOOR4        ;-; a prejdi do stavu FLOOR4   
0216                 453    DOWN3A:
                     454 +1                 POLOHA_LED 3  ;-; Zhasni LEDKY,uz sme na poschodi (aj na paneli "Poloha kabi
                                                                               ny", nechaj len aktualne poschodie)
DEBUG                                                                                                         PAGE 9

0216 C22F            455 +1         clr     LEDU            
0218 C22E            456 +1         clr     LEDD 
021A C224            457 +1         clr     FLED1             
021C C225            458 +1         clr     FLED2                
021E C226            459 +1         clr     FLED3           
0220 C227            460 +1         clr     FLED4           
0222 D226            461 +1         setb    FLED3
0224 12034A          462 +1         lcall   WRITEPORTS
0227 12030D          464            lcall   READPORTS       ; nacitanie dat
022A 200AE9          465            jb      MB2, DOWN3A    ;-; mame uz 1. spomalovaciu clonku?
022D 12030D          466            lcall   READPORTS       ; ak ano, sme z nej uz prec?
0230 300AFA          467            jnb     MB2, $-3        ;       
0233 D22F            468            setb    LEDU            ; Ak ano, rozsviet LEDku, ze mame prvu MB2 mame za sebou
0235 12034A          469            lcall   WRITEPORTS      ;
0238 02023B          470            jmp     DOWN3_MB2     ;-; a prejdi do stavu DOWN3_MB2
023B                 471    DOWN3_MB2:
023B 12030D          472            lcall   READPORTS       ; nacitanie dat
023E 200AFA          473            jb      MB2, DOWN3_MB2;-; mame uz aj druhu spomalovaciu clonku?          
0241 D22E            474            setb    LEDD            ; Ak ano, rozsviet LEDku, ze mame druhu MB2
0243 12034A          475            lcall   WRITEPORTS      ;
0246 020249          476            jmp     DOWN3_MB1     ;-; a prejdi do stavu DOWN3_MB1
0249                 477    DOWN3_MB1:    
0249 12030D          478            lcall   READPORTS       ; nacitanie dat
024C 2009FA          479            jb      MB1, DOWN3_MB1;-; Sme na zastavovacej clonke?
024F E528            480            mov     A, INPORTA      ; Ak ano, chceme tu zastavit? - je toto poschodie zvolene?
0251 5404            481            anl     A, #00000100b ;-;
0253 607D            482            jz      DOWN2         ;-; Ak nie, chod do stavu DOWN2
0255 C221            483            clr     DOWN            ; zastav motor
0257 C222            484            clr     FAST            ; 
0259 12034A          485            lcall   WRITEPORTS      ; 
025C 2132            486            jmp     FLOOR2        ;-; a prejdi do stavu FLOOR2      
                     487          
                     488            
                     489    ;------------------------------------------------------------------------------- << 4. posch
                                                                               odie >>
                     490    
025E                 491    FLOOR4:
                     492 +1                 POLOHA_LED 4  ;-; Zhasni LEDKY,uz sme na poschodi (aj na paneli "Poloha kabi
                                                                               ny", nechaj len aktualne poschodie)
025E C22F            493 +1         clr     LEDU            
0260 C22E            494 +1         clr     LEDD 
0262 C224            495 +1         clr     FLED1             
0264 C225            496 +1         clr     FLED2                
0266 C226            497 +1         clr     FLED3           
0268 C227            498 +1         clr     FLED4           
026A D227            499 +1         setb    FLED4
026C 12034A          500 +1         lcall   WRITEPORTS
026F 1202FC          502            lcall   WAITFORTIMER    ; simulacia TIMERu
0272 12030D          503    F4S:    lcall   READPORTS     ;-; nacitanie dat
0275 C21C            504            clr     PKO4          ;-; vynulovanie volby poschodia na ktorom stojim
0277 12034A          505            lcall   WRITEPORTS      ;
027A E528            506            mov     A, INPORTA      ; zistenie, cibolo stlacene nieco menej ako poschodie na kto
                                                                               rom stojim
027C 540E            507            anl     A, #00001110b ;-;
027E 60F2            508            jz      F4S           ;-; ak nie, opakuj
0280 D221            509            setb    DOWN            ; rychly pohyb dole
0282 D222            510            setb    FAST            ; 
0284 12034A          511            lcall   WRITEPORTS      ; 
DEBUG                                                                                                         PAGE 10

0287 02028A          512            jmp     DOWN4         ;-; prejdi do stavu DOWN4 
028A                 513    DOWN4:
                     514 +1                 POLOHA_LED 4  ;-; Zhasni LEDKY,uz sme na poschodi (aj na paneli "Poloha kabi
                                                                               ny", nechaj len aktualne poschodie)
028A C22F            515 +1         clr     LEDU            
028C C22E            516 +1         clr     LEDD 
028E C224            517 +1         clr     FLED1             
0290 C225            518 +1         clr     FLED2                
0292 C226            519 +1         clr     FLED3           
0294 C227            520 +1         clr     FLED4           
0296 D227            521 +1         setb    FLED4
0298 12034A          522 +1         lcall   WRITEPORTS
029B 12030D          524            lcall   READPORTS       ; nacitanie dat
029E 200AE9          525            jb      MB2, DOWN4    ;-; mame uz 1. spomalovaciu clonku?
02A1 12030D          526            lcall   READPORTS       ; ak ano, sme z nej uz prec?
02A4 300AFA          527            jnb     MB2, $-3        ;       
02A7 D22F            528            setb    LEDU            ; Ak ano, rozsviet LEDku, ze mame prvu MB2 mame za sebou
02A9 12034A          529            lcall   WRITEPORTS      ;
02AC 0202AF          530            jmp     DOWN4_MB2     ;-; a prejdi do stavu DOWN4_MB2
02AF                 531    DOWN4_MB2:
02AF 12030D          532            lcall   READPORTS       ; nacitanie dat
02B2 200AFA          533            jb      MB2, DOWN4_MB2;-; mame uz aj druhu spomalovaciu clonku?          
02B5 D22E            534            setb    LEDD            ; Ak ano, rozsviet LEDku, ze mame druhu MB2
02B7 12034A          535            lcall   WRITEPORTS      ;
02BA 0202BD          536            jmp     DOWN4_MB1     ;-; a prejdi do stavu DOWN4_MB1
02BD                 537    DOWN4_MB1:    
02BD 12030D          538            lcall   READPORTS       ; nacitanie dat
02C0 2009FA          539            jb      MB1, DOWN4_MB1;-; Sme na zastavovacej clonke?
02C3 E528            540            mov     A, INPORTA      ; Ak ano, chceme tu zastavit? - je toto poschodie zvolene?
02C5 5408            541            anl     A, #00001000b ;-;
02C7 6018            542            jz      DOWN3         ;-; Ak nie, chod do stavu DOWN3
02C9 C221            543            clr     DOWN            ; zastav motor
02CB C222            544            clr     FAST            ; 
02CD 12034A          545            lcall   WRITEPORTS      ; 
02D0 21A7            546            jmp     FLOOR3        ;-; a prejdi do stavu FLOOR3                 
                     547                    
                     548      
02D2                 549    DOWN2: 
02D2 C221            550            clr     DOWN            ; zastav motor
02D4 C222            551            clr     FAST            ; 
02D6 12034A          552            lcall   WRITEPORTS      ; 
                     553 +1         _BP_
02D9 C2B3            554 +1         clr     P3.3
02DB D2AA            555 +1         setb    EX1
02DD 00              556 +1         nop
02DE 00              557 +1         nop
02DF 00              559            nop
02E0 00              560            nop
                     561            
02E1                 562    DOWN3: 
02E1 C221            563            clr     DOWN            ; zastav motor
02E3 C222            564            clr     FAST            ; 
02E5 12034A          565            lcall   WRITEPORTS      ; 
                     566 +1         _BP_
02E8 C2B3            567 +1         clr     P3.3
02EA D2AA            568 +1         setb    EX1
02EC 00              569 +1         nop
02ED 00              570 +1         nop
DEBUG                                                                                                         PAGE 11

02EE 00              572            nop
02EF 00              573            nop                
                     574                    
                     575                    
02F0                 576    ENDPROG:
02F0 D218            577            setb    KS
02F2 12034A          578            call    WRITEPORTS                ; zapis novu informaciu
                     579 +1         _BP_
02F5 C2B3            580 +1         clr     P3.3
02F7 D2AA            581 +1         setb    EX1
02F9 00              582 +1         nop
02FA 00              583 +1         nop
02FB 22              585            ret
                     586    
                     587    
                     588    ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                     589    ; WAITFORTIMER
                     590    ; Pocka na stlacenie tlacidla na 1. poschodi  - signal PO1 (v buducnosti to 
                     591    ; bude timer)
                     592    ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
02FC                 593    WAITFORTIMER:
02FC D22C            594            setb    PO3U                        ; rozsvieti indikator cakania (poschodie 4)
02FE 12034A          595            lcall   WRITEPORTS                  ;
0301 12030D          596    WAIT:   lcall   READPORTS                   ; 
0304 3013F5          597            jnb     PI3D, WAITFORTIMER          ; ak nebolo stlacene tlacidlo PO1, cakaj 
0307 C22C            598            clr     PO3U                         ; zhasne indikator cakania (poschodie 4)
0309 12034A          599            lcall   WRITEPORTS
030C 22              600            ret
                     601    
                     602    
                     603    ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                     604    ; READPORTS
                     605    ; precita nove hodnoty na portoch
                     606    ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
030D                 607    READPORTS:
030D 75A080          608            mov     p2, #i8255INA       ; citaj data z portu A
0310 75803F          609            mov     p0, #(bmSTOP or bmPKI1 or bmPKI2 or bmPKI3 or bmPKI4 or bmDOORCLSD)
0313 C2B7            610            clr     RDNOT
0315 00              611            nop
0316 00              612            nop
0317 00              613            nop
0318 00              614            nop
0319 858028          615            mov     INPORTA, p0         ; uloz informaciu z datovej zbernice 
031C D2B7            616            setb    RDNOT
                     617            
031E 75A081          618            mov     p2, #i8255INB       ; citaj data z portu B
0321 7580FE          619            mov     p0, #(bmMB1I or bmMB2I or bmSKRHI or bmSKRHD or bmDPI or bmDPKI or bmDPZKI)
                                                                               
0324 C2B7            620            clr     RDNOT
0326 00              621            nop
0327 00              622            nop
0328 00              623            nop
0329 00              624            nop
032A 858021          625            mov     INPORTB, p0         ; uloz informaciu z datovej zbernice 
032D D2B7            626            setb    RDNOT
                     627    
032F 75A082          628            mov     p2, #i8255INC       ; citaj data z portu C
0332 75803F          629            mov     p0, #(bmPI1 or bmPI2D or bmPI2U or bmPI3D or bmPI3U or bmPI4)
DEBUG                                                                                                         PAGE 12

0335 C2B7            630            clr     RDNOT
0337 00              631            nop
0338 00              632            nop
0339 00              633            nop
033A 00              634            nop
033B 858022          635            mov     INPORTC, p0         ; uloz informaciu z datovej zbernice 
033E D2B7            636            setb    RDNOT
                     637            
                     638            
0340 E528            639            mov     A, INPORTA
0342 541E            640            anl     A, #00011110b
0344 4223            641            orl     OUTPORTA, A
0346 12034A          642            call    WRITEPORTS              ; aktualizuj signalizaciu na ovladacom paneli
                     643            
0349 22              644            ret
                     645            
                     646    ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                     647    ; WRITEPORTS
                     648    ; spravi zalohu vystupnych registrov a posle data von
                     649    ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
034A                 650    WRITEPORTS:
034A 852380          651            mov     p0, OUTPORTA        ; teraz postupne posli data najprv na port A,
034D 75A0C0          652            mov     p2, #i8255OUTA
0350 C2B6            653            clr     WRNOT
0352 00              654            nop
0353 00              655            nop
0354 00              656            nop
0355 00              657            nop
0356 D2B6            658            setb    WRNOT
                     659            
0358 852480          660            mov     p0, OUTPORTB        ; potom port B
035B 75A0C1          661            mov     p2, #i8255OUTB
035E C2B6            662            clr     WRNOT
0360 00              663            nop
0361 00              664            nop
0362 00              665            nop
0363 00              666            nop
0364 D2B6            667            setb    WRNOT
                     668    
0366 852580          669            mov     p0, OUTPORTC        ; a nakoniec port C
0369 75A0C2          670            mov     p2, #i8255OUTC
036C C2B6            671            clr     WRNOT
036E 00              672            nop
036F 00              673            nop
0370 00              674            nop
0371 00              675            nop
0372 D2B6            676            setb    WRNOT
                     677            
0374 22              678            ret
                     679    
                     680    ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                     681    
0375 0D0A5269        682    STR_INIT:   db  0dh, 0ah, 'Riadiaci system je inicializovany.', 0dh, 0ah, 00h
0379 61646961   
037D 63692073   
0381 79737465   
0385 6D206A65   
0389 20696E69   
DEBUG                                                                                                         PAGE 13

038D 6369616C   
0391 697A6F76   
0395 616E792E   
0399 0D0A00     
039C 52696164        683    STR_STOP:   db  'Riadiaci system je reinicializovany po stlaceni tlacidla STOP.', 0dh, 0ah, 
                                                                               00h
03A0 69616369   
03A4 20737973   
03A8 74656D20   
03AC 6A652072   
03B0 65696E69   
03B4 6369616C   
03B8 697A6F76   
03BC 616E7920   
03C0 706F2073   
03C4 746C6163   
03C8 656E6920   
03CC 746C6163   
03D0 69646C61   
03D4 2053544F   
03D8 502E0D0A   
03DC 00         
03DD 4B616C69        684    STR_CALIB:  db  'Kalibracia vytahu je ukoncena.', 0dh, 0ah, 00h
03E1 62726163   
03E5 69612076   
03E9 79746168   
03ED 75206A65   
03F1 20756B6F   
03F5 6E63656E   
03F9 612E0D0A   
03FD 00         
                     685    
----                 686            DSEG
0040                 687            org     40h
0040                 688    STACK:  DS      10h
                     689    
                     690    end

VERSION 1.2h ASSEMBLY COMPLETE, 0 ERRORS FOUND
DEBUG                                                                                                         PAGE 14

BMDOORCLSD . . . . . . . . . . .    NUMB  0020H  
BMDOWN . . . . . . . . . . . . .    NUMB  0002H  NOT USED  
BMDPI. . . . . . . . . . . . . .    NUMB  0020H  
BMDPKI . . . . . . . . . . . . .    NUMB  0080H  
BMDPZKI. . . . . . . . . . . . .    NUMB  0040H  
BMFAST . . . . . . . . . . . . .    NUMB  0004H  NOT USED  
BMFLED1. . . . . . . . . . . . .    NUMB  0010H  
BMFLED2. . . . . . . . . . . . .    NUMB  0020H  
BMFLED3. . . . . . . . . . . . .    NUMB  0040H  
BMFLED4. . . . . . . . . . . . .    NUMB  0080H  
BMKS . . . . . . . . . . . . . .    NUMB  0001H  NOT USED  
BMLEDD . . . . . . . . . . . . .    NUMB  0040H  
BMLEDU . . . . . . . . . . . . .    NUMB  0080H  
BMMB1I . . . . . . . . . . . . .    NUMB  0002H  
BMMB2I . . . . . . . . . . . . .    NUMB  0004H  
BMPI1. . . . . . . . . . . . . .    NUMB  0001H  
BMPI2D . . . . . . . . . . . . .    NUMB  0002H  
BMPI2U . . . . . . . . . . . . .    NUMB  0004H  
BMPI3D . . . . . . . . . . . . .    NUMB  0008H  
BMPI3U . . . . . . . . . . . . .    NUMB  0010H  
BMPI4. . . . . . . . . . . . . .    NUMB  0020H  
BMPKI1 . . . . . . . . . . . . .    NUMB  0002H  
BMPKI2 . . . . . . . . . . . . .    NUMB  0004H  
BMPKI3 . . . . . . . . . . . . .    NUMB  0008H  
BMPKI4 . . . . . . . . . . . . .    NUMB  0010H  
BMPKO1 . . . . . . . . . . . . .    NUMB  0002H  
BMPKO2 . . . . . . . . . . . . .    NUMB  0004H  
BMPKO3 . . . . . . . . . . . . .    NUMB  0008H  
BMPKO4 . . . . . . . . . . . . .    NUMB  0010H  
BMPO1. . . . . . . . . . . . . .    NUMB  0001H  
BMPO2D . . . . . . . . . . . . .    NUMB  0002H  
BMPO2U . . . . . . . . . . . . .    NUMB  0004H  
BMPO3D . . . . . . . . . . . . .    NUMB  0008H  
BMPO3U . . . . . . . . . . . . .    NUMB  0010H  
BMPO4. . . . . . . . . . . . . .    NUMB  0020H  
BMSKRHD. . . . . . . . . . . . .    NUMB  0010H  
BMSKRHI. . . . . . . . . . . . .    NUMB  0008H  
BMSLOW . . . . . . . . . . . . .    NUMB  0008H  NOT USED  
BMSTOP . . . . . . . . . . . . .    NUMB  0001H  
BMUP . . . . . . . . . . . . . .    NUMB  0001H  NOT USED  
CALIB. . . . . . . . . . . . . .  C ADDR  0096H  NOT USED  
CALIBEND . . . . . . . . . . . .  C ADDR  00ABH  
CALIBLOOP. . . . . . . . . . . .  C ADDR  00A3H  
CANGO. . . . . . . . . . . . . .  B ADDR  0038H  NOT USED  
CTRLREG. . . . . . . . . . . . .  D ADDR  0027H  
DOORCLSD . . . . . . . . . . . .  B ADDR  0045H  NOT USED  
DOORCLSDOLD. . . . . . . . . . .  B ADDR  0039H  NOT USED  
DOWN . . . . . . . . . . . . . .  B ADDR  0021H  
DOWN2. . . . . . . . . . . . . .  C ADDR  02D2H  
DOWN3. . . . . . . . . . . . . .  C ADDR  02E1H  
DOWN3A . . . . . . . . . . . . .  C ADDR  0216H  
DOWN3_MB1. . . . . . . . . . . .  C ADDR  0249H  
DOWN3_MB2. . . . . . . . . . . .  C ADDR  023BH  
DOWN4. . . . . . . . . . . . . .  C ADDR  028AH  
DOWN4_MB1. . . . . . . . . . . .  C ADDR  02BDH  
DOWN4_MB2. . . . . . . . . . . .  C ADDR  02AFH  
DOWNOLD. . . . . . . . . . . . .  B ADDR  003BH  NOT USED  
DP . . . . . . . . . . . . . . .  B ADDR  000DH  NOT USED  
DEBUG                                                                                                         PAGE 15

DPK. . . . . . . . . . . . . . .  B ADDR  000FH  NOT USED  
DPZK . . . . . . . . . . . . . .  B ADDR  000EH  NOT USED  
ENDPROG. . . . . . . . . . . . .  C ADDR  02F0H  NOT USED  
EX1. . . . . . . . . . . . . . .  B ADDR  00AAH  PREDEFINED  
F1S. . . . . . . . . . . . . . .  C ADDR  00D1H  
F2S. . . . . . . . . . . . . . .  C ADDR  0146H  
F3S. . . . . . . . . . . . . . .  C ADDR  01BBH  
F4S. . . . . . . . . . . . . . .  C ADDR  0272H  
FAST . . . . . . . . . . . . . .  B ADDR  0022H  
FASTOLD. . . . . . . . . . . . .  B ADDR  003CH  NOT USED  
FLED1. . . . . . . . . . . . . .  B ADDR  0024H  
FLED2. . . . . . . . . . . . . .  B ADDR  0025H  
FLED3. . . . . . . . . . . . . .  B ADDR  0026H  
FLED4. . . . . . . . . . . . . .  B ADDR  0027H  
FLOOR1 . . . . . . . . . . . . .  C ADDR  00BDH  NOT USED  
FLOOR2 . . . . . . . . . . . . .  C ADDR  0132H  
FLOOR3 . . . . . . . . . . . . .  C ADDR  01A7H  
FLOOR4 . . . . . . . . . . . . .  C ADDR  025EH  
FLOORREQ . . . . . . . . . . . .  D ADDR  0036H  
HIGHEST. . . . . . . . . . . . .  D ADDR  0032H  NOT USED  
I8255INA . . . . . . . . . . . .    NUMB  0080H  
I8255INB . . . . . . . . . . . .    NUMB  0081H  
I8255INC . . . . . . . . . . . .    NUMB  0082H  
I8255INCW. . . . . . . . . . . .    NUMB  0083H  
I8255OUTA. . . . . . . . . . . .    NUMB  00C0H  
I8255OUTB. . . . . . . . . . . .    NUMB  00C1H  
I8255OUTC. . . . . . . . . . . .    NUMB  00C2H  
I8255OUTCW . . . . . . . . . . .    NUMB  00C3H  
INPORTA. . . . . . . . . . . . .  D ADDR  0028H  
INPORTB. . . . . . . . . . . . .  D ADDR  0021H  
INPORTBOLD . . . . . . . . . . .  D ADDR  0026H  
INPORTC. . . . . . . . . . . . .  D ADDR  0022H  
KS . . . . . . . . . . . . . . .  B ADDR  0018H  
LEDD . . . . . . . . . . . . . .  B ADDR  002EH  
LEDU . . . . . . . . . . . . . .  B ADDR  002FH  
LOWEST . . . . . . . . . . . . .  D ADDR  0031H  NOT USED  
MAIN . . . . . . . . . . . . . .  C ADDR  00BDH  NOT USED  
MB1. . . . . . . . . . . . . . .  B ADDR  0009H  
MB1OLD . . . . . . . . . . . . .  B ADDR  0031H  NOT USED  
MB2. . . . . . . . . . . . . . .  B ADDR  000AH  
MB2OLD . . . . . . . . . . . . .  B ADDR  0032H  NOT USED  
OUTPORTA . . . . . . . . . . . .  D ADDR  0023H  
OUTPORTB . . . . . . . . . . . .  D ADDR  0024H  
OUTPORTBOLD. . . . . . . . . . .  D ADDR  0034H  NOT USED  
OUTPORTC . . . . . . . . . . . .  D ADDR  0025H  
P0 . . . . . . . . . . . . . . .  D ADDR  0080H  PREDEFINED  
P2 . . . . . . . . . . . . . . .  D ADDR  00A0H  PREDEFINED  
P3 . . . . . . . . . . . . . . .  D ADDR  00B0H  PREDEFINED  
PI1. . . . . . . . . . . . . . .  B ADDR  0010H  NOT USED  
PI2D . . . . . . . . . . . . . .  B ADDR  0011H  NOT USED  
PI2U . . . . . . . . . . . . . .  B ADDR  0012H  NOT USED  
PI3D . . . . . . . . . . . . . .  B ADDR  0013H  
PI3U . . . . . . . . . . . . . .  B ADDR  0014H  NOT USED  
PI4. . . . . . . . . . . . . . .  B ADDR  0015H  NOT USED  
PKI1 . . . . . . . . . . . . . .  B ADDR  0041H  NOT USED  
PKI2 . . . . . . . . . . . . . .  B ADDR  0042H  NOT USED  
PKI3 . . . . . . . . . . . . . .  B ADDR  0043H  NOT USED  
PKI4 . . . . . . . . . . . . . .  B ADDR  0044H  NOT USED  
DEBUG                                                                                                         PAGE 16

PKO1 . . . . . . . . . . . . . .  B ADDR  0019H  
PKO2 . . . . . . . . . . . . . .  B ADDR  001AH  
PKO3 . . . . . . . . . . . . . .  B ADDR  001BH  
PKO4 . . . . . . . . . . . . . .  B ADDR  001CH  
PO1. . . . . . . . . . . . . . .  B ADDR  0028H  NOT USED  
PO2D . . . . . . . . . . . . . .  B ADDR  0029H  NOT USED  
PO2U . . . . . . . . . . . . . .  B ADDR  002AH  NOT USED  
PO3D . . . . . . . . . . . . . .  B ADDR  002BH  NOT USED  
PO3U . . . . . . . . . . . . . .  B ADDR  002CH  
PO4. . . . . . . . . . . . . . .  B ADDR  002DH  NOT USED  
POSITION . . . . . . . . . . . .  D ADDR  0030H  NOT USED  
RDNOT. . . . . . . . . . . . . .  B ADDR  00B7H  
READPORTS. . . . . . . . . . . .  C ADDR  030DH  
RESET. . . . . . . . . . . . . .  C ADDR  0033H  NOT USED  
SKRD . . . . . . . . . . . . . .  B ADDR  000CH  
SKRDOLD. . . . . . . . . . . . .  B ADDR  0034H  NOT USED  
SKRH . . . . . . . . . . . . . .  B ADDR  000BH  NOT USED  
SKRHOLD. . . . . . . . . . . . .  B ADDR  0033H  NOT USED  
SLOW . . . . . . . . . . . . . .  B ADDR  0023H  NOT USED  
SLOWOLD. . . . . . . . . . . . .  B ADDR  003DH  NOT USED  
SP . . . . . . . . . . . . . . .  D ADDR  0081H  PREDEFINED  
STACK. . . . . . . . . . . . . .  D ADDR  0040H  
START. . . . . . . . . . . . . .  C ADDR  0033H  
STOPNOT. . . . . . . . . . . . .  B ADDR  0040H  NOT USED  
STOPTIMER. . . . . . . . . . . .  D ADDR  0033H  
STR_CALIB. . . . . . . . . . . .  C ADDR  03DDH  NOT USED  
STR_INIT . . . . . . . . . . . .  C ADDR  0375H  NOT USED  
STR_STOP . . . . . . . . . . . .  C ADDR  039CH  NOT USED  
TIMERCONST . . . . . . . . . . .    NUMB  00FAH  NOT USED  
UP . . . . . . . . . . . . . . .  B ADDR  0020H  
UP1. . . . . . . . . . . . . . .  C ADDR  00E9H  
UP1_MB1. . . . . . . . . . . . .  C ADDR  011CH  
UP1_MB2. . . . . . . . . . . . .  C ADDR  010EH  
UP2. . . . . . . . . . . . . . .  C ADDR  015EH  
UP2_MB1. . . . . . . . . . . . .  C ADDR  0191H  
UP2_MB2. . . . . . . . . . . . .  C ADDR  0183H  
UP3. . . . . . . . . . . . . . .  C ADDR  01D3H  
UP3_MB1. . . . . . . . . . . . .  C ADDR  0206H  
UP3_MB2. . . . . . . . . . . . .  C ADDR  01F8H  
UPOLD. . . . . . . . . . . . . .  B ADDR  003AH  NOT USED  
WAIT . . . . . . . . . . . . . .  C ADDR  0301H  NOT USED  
WAITFORTIMER . . . . . . . . . .  C ADDR  02FCH  
WRITEPORTS . . . . . . . . . . .  C ADDR  034AH  
WRNOT. . . . . . . . . . . . . .  B ADDR  00B6H  
