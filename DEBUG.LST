VYTAH/ORI                                                                                                     PAGE 1

                       1    $MOD51
                       2    $DEBUG
                       3    
                =1     4    $include (lift.inc)
                =1     5    ; adresy I/O portov, ktore pridu na port P2 89C52-ky
  0080          =1     6    i8255INA        equ     080h
  0081          =1     7    i8255INB        equ     081h
  0082          =1     8    i8255INC        equ     082h
  0083          =1     9    i8255INCW       equ     083h
  00C0          =1    10    i8255OUTA       equ     0c0h
  00C1          =1    11    i8255OUTB       equ     0c1h
  00C2          =1    12    i8255OUTC       equ     0c2h
  00C3          =1    13    i8255OUTCW      equ     0c3h
                =1    14    
  0028          =1    15    INPORTA         data    28h         ; nutne kvoli emulatoru!!!
  0021          =1    16    INPORTB         data    21h
  0022          =1    17    INPORTC         data    22h
  0023          =1    18    OUTPORTA        data    23h
  0024          =1    19    OUTPORTB        data    24h
  0025          =1    20    OUTPORTC        data    25h
  0026          =1    21    INPORTBold      data    26h
  0027          =1    22    CTRLREG         data    27h
                =1    23    
  0030          =1    24    POSITION        data    30h
  0031          =1    25    LOWEST          data    31h
  0032          =1    26    HIGHEST         data    32h
  0033          =1    27    STOPTIMER       data    33h
  0034          =1    28    OUTPORTBold     data    34h
                =1    29    
  0040          =1    30    STOPNOT         bit     INPORTA.0
  0041          =1    31    PKI1            bit     INPORTA.1
  0042          =1    32    PKI2            bit     INPORTA.2
  0043          =1    33    PKI3            bit     INPORTA.3
  0044          =1    34    PKI4            bit     INPORTA.4
  0045          =1    35    DOORCLSD        bit     INPORTA.5 
                =1    36    
  0009          =1    37    MB1             bit     INPORTB.1       ; clonky maju invertovanu logiku
  000A          =1    38    MB2             bit     INPORTB.2
  000B          =1    39    SKRH            bit     INPORTB.3
  000C          =1    40    SKRD            bit     INPORTB.4
  000D          =1    41    DP              bit     INPORTB.5
  000E          =1    42    DPZK            bit     INPORTB.6
  000F          =1    43    DPK             bit     INPORTB.7
                =1    44    
  0031          =1    45    MB1old          bit     INPORTBold.1
  0032          =1    46    MB2old          bit     INPORTBold.2
  0033          =1    47    SKRHold         bit     INPORTBold.3
  0034          =1    48    SKRDold         bit     INPORTBold.4
                =1    49    
  0010          =1    50    PI1             bit     INPORTC.0
  0011          =1    51    PI2D            bit     INPORTC.1
  0012          =1    52    PI2U            bit     INPORTC.2
  0013          =1    53    PI3D            bit     INPORTC.3
  0014          =1    54    PI3U            bit     INPORTC.4
  0015          =1    55    PI4             bit     INPORTC.5
                =1    56    
  0018          =1    57    KS              bit     OUTPORTA.0
  0019          =1    58    PKO1            bit     OUTPORTA.1
VYTAH/ORI/D                                                                                                  PAGE 2

  001A          =1    59    PKO2            bit     OUTPORTA.2
  001B          =1    60    PKO3            bit     OUTPORTA.3
  001C          =1    61    PKO4            bit     OUTPORTA.4
                =1    62    
  0020          =1    63    UP              bit     OUTPORTB.0
  0021          =1    64    DOWN            bit     OUTPORTB.1
  0022          =1    65    FAST            bit     OUTPORTB.2
  0023          =1    66    SLOW            bit     OUTPORTB.3
  0024          =1    67    FLED1           bit     OUTPORTB.4
  0025          =1    68    FLED2           bit     OUTPORTB.5
  0026          =1    69    FLED3           bit     OUTPORTB.6
  0027          =1    70    FLED4           bit     OUTPORTB.7
                =1    71    
  0028          =1    72    PO1             bit     OUTPORTC.0
  0029          =1    73    PO2D            bit     OUTPORTC.1
  002A          =1    74    PO2U            bit     OUTPORTC.2
  002B          =1    75    PO3D            bit     OUTPORTC.3
  002C          =1    76    PO3U            bit     OUTPORTC.4
  002D          =1    77    PO4             bit     OUTPORTC.5
  002E          =1    78    LEDD            bit     OUTPORTC.6
  002F          =1    79    LEDU            bit     OUTPORTC.7
                =1    80    
  0038          =1    81    CANGO           bit     CTRLREG.0
  0039          =1    82    DOORCLSDold     bit     CTRLREG.1
  003A          =1    83    UPold           bit     CTRLREG.2
  003B          =1    84    DOWNold         bit     CTRLREG.3
  003C          =1    85    FASTold         bit     CTRLREG.4
  003D          =1    86    SLOWold         bit     CTRLREG.5
                =1    87    
  00B6          =1    88    WRNOT           bit     0b6h        ; p3.6
  00B7          =1    89    RDNOT           bit     0b7h        ; p3.7
                =1    90    
                =1    91    ; bitove masky
                =1    92    ; 8255OUT 
                =1    93    ; port A
  0001          =1    94    bmKS              equ    00000001b
  0002          =1    95    bmPKO1            equ    00000010b
  0004          =1    96    bmPKO2            equ    00000100b
  0008          =1    97    bmPKO3            equ    00001000b
  0010          =1    98    bmPKO4            equ    00010000b
                =1    99    
                =1   100    ; port B
  0001          =1   101    bmUP              equ    00000001b
  0002          =1   102    bmDOWN            equ    00000010b
  0004          =1   103    bmFAST            equ    00000100b
  0008          =1   104    bmSLOW            equ    00001000b
  0010          =1   105    bmFLED1           equ    00010000b
  0020          =1   106    bmFLED2           equ    00100000b
  0040          =1   107    bmFLED3           equ    01000000b
  0080          =1   108    bmFLED4           equ    10000000b
                =1   109    
                =1   110    ; port C
  0001          =1   111    bmPO1             equ    00000001b
  0002          =1   112    bmPO2D            equ    00000010b
  0004          =1   113    bmPO2U            equ    00000100b
  0008          =1   114    bmPO3D            equ    00001000b
  0010          =1   115    bmPO3U            equ    00010000b
  0020          =1   116    bmPO4             equ    00100000b
VYTAH/ORI/D                                                                                                  PAGE 3

  0040          =1   117    bmLEDD            equ    01000000b
  0080          =1   118    bmLEDU            equ    10000000b
                =1   119    
                =1   120    ; 8255IN
                =1   121    ; port A
  0001          =1   122    bmSTOP            equ    00000001b
  0002          =1   123    bmPKI1            equ    00000010b
  0004          =1   124    bmPKI2            equ    00000100b
  0008          =1   125    bmPKI3            equ    00001000b
  0010          =1   126    bmPKI4            equ    00010000b
  0020          =1   127    bmDOORCLSD        equ    00100000b
                =1   128    
                =1   129    ; port B
  0002          =1   130    bmMB1I            equ    00000010b
  0004          =1   131    bmMB2I            equ    00000100b
  0008          =1   132    bmSKRHI           equ    00001000b
  0010          =1   133    bmSKRHD           equ    00010000b
  0020          =1   134    bmDPI             equ    00100000b
  0040          =1   135    bmDPZKI           equ    01000000b
  0080          =1   136    bmDPKI            equ    10000000b
                =1   137    
                =1   138    ; port C
  0001          =1   139    bmPI1             equ    00000001b
  0002          =1   140    bmPI2D            equ    00000010b
  0004          =1   141    bmPI2U            equ    00000100b
  0008          =1   142    bmPI3D            equ    00001000b
  0010          =1   143    bmPI3U            equ    00010000b
  0020          =1   144    bmPI4             equ    00100000b
                =1   145    
                     146    
                     147    _BP_    MACRO 
                     148            clr     P3.3
                     149            setb    EX1
                     150            nop
                     151            nop
                     152    ENDM
                     153    
                     154    POLOHA_LED  MACRO  POLOHA
                     155            clr     LEDU            
                     156            clr     LEDD 
                     157            clr     FLED1             
                     158            clr     FLED2                
                     159            clr     FLED3           
                     160            clr     FLED4           
                     161            setb    FLED&POLOHA
                     162            lcall   WRITEPORTS
                     163    ENDM
                     164    
  0036               165    FLOORREQ        data    36h
                     166    
                     167    ; hodiny oscilatora v emulatore treba dat na ext a nastavit 11.0592MHz
  00FA               168    TIMERCONST      equ     250     ; udaj pre nastavenie casovaca pre potreby seriovej komunika
                                                                               cie
                     169                                    ; hodnota 250 znamena prenosovu rychlost 4800 baud pri oscil
                                                                               atore 11.0592MHz
                     170                                    ; nastavenie terminalu je 4800 8-N-1, no flow control
                     171    ;osetrenie vektorov preruseni
0000                 172            org     0000h           ; adresa odkial startuje program po resete
VYTAH/ORI 2D                                                                                                  PAGE 4

0000 020033          173            ljmp    START           ; skok na zaciatok kodu programu
                     174                  
0033                 175            org     0033h           ; od tejto adresy sa zacina kod programu
0033                 176    START:
0033                 177    RESET:  
                     178            ; riadiace signaly do pasivnej urovne 
0033 D2B6            179            setb    WRNOT
0035 D2B7            180            setb    RDNOT
0037 753300          181            mov     STOPTIMER, #0
003A 758140          182            mov     SP, #STACK
                     183    
                     184            ; pockame si na inicializaciu obvodov 8255  
003D 7900            185            mov     R1, #0 
003F 7AFF            186            mov     R2, #0ffh
0041 D9FE            187            djnz    R1, $
0043 DAFC            188            djnz    R2, $-2
                     189            
                     190            ; teraz ich mozeme nastavit
0045 75809B          191            mov     p0, #10011011b      ; nastavenie i8255IN - vsetky porty dnu
0048 75A083          192            mov     p2, #i8255INCW
004B C2B6            193            clr     WRNOT
004D 00              194            nop
004E 00              195            nop
004F 00              196            nop
0050 00              197            nop
0051 D2B6            198            setb    WRNOT
0053 758080          199            mov     p0, #10000000b      ; nastavenie i8255OUT - vsetky porty von
0056 75A0C3          200            mov     p2, #i8255OUTCW
0059 C2B6            201            clr     WRNOT
005B 00              202            nop
005C 00              203            nop
005D 00              204            nop
005E 00              205            nop
005F D2B6            206            setb    WRNOT
                     207            
                     208 +1         _BP_
0061 C2B3            209 +1         clr     P3.3
0063 D2AA            210 +1         setb    EX1
0065 00              211 +1         nop
0066 00              212 +1         nop
                     214    
                     215            ; pociatocna inicializacia - vynuluj vstupne registre a rozsviet vsetky diody 
0067 752800          216            mov     INPORTA, #0
006A 75211E          217            mov     INPORTB, #01eh      ; vsetky clonky pasivne
006D 752200          218            mov     INPORTC, #0
0070 75231E          219            mov     OUTPORTA, #(bmPKO1 or bmPKO2 or bmPKO3 or bmPKO4)
0073 7524F0          220            mov     OUTPORTB, #(bmFLED1 or bmFLED2 or bmFLED3 or bmFLED4)
0076 7525FF          221            mov     OUTPORTC, #(bmPO1 or bmPO2D or bmPO2U or bmPO3D or bmPO3U or bmPO4 or bmLEDD
                                                                                or bmLEDU)
0079 D218            222            setb    KS
007B 1203A7          223            call    WRITEPORTS          ; zapis novu informaciu
                     224    ;;;;;;;;
                     225    
007E 752300          226            mov     OUTPORTA, #0
0081 752400          227            mov     OUTPORTB, #0
0084 752500          228            mov     OUTPORTC, #0
0087 1203A7          229            call    WRITEPORTS          ; zapis novu informaciu
                     230    
VYTAH/ORIZD                                                                                                  PAGE 5

008A 752800          231            mov     INPORTA, #0
008D 752100          232            mov     INPORTB, #0         
0090 752200          233            mov     INPORTC, #0
0093 12036A          234            call    READPORTS           ; prvotne nacitanie udajov
                     235    
0096                 236    CALIB:
                     237            ;kalibracia vytahu podla dolnej porovnavacej clonky
0096 12036A          238            lcall   READPORTS                   ; precitaj, co je na portoch
0099 300C0F          239            jnb     SKRD, CALIBEND              ; ak sme na dolnej porovnavacej clonke, tak koni
                                                                               ec
009C D221            240            setb    DOWN                        ; inak pod dole
009E D222            241            setb    FAST                        ; a rychlo
00A0 1203A7          242            lcall   WRITEPORTS                  ; zapis informaciu 
00A3                 243    CALIBLOOP:
00A3 12036A          244            lcall   READPORTS                   ; 
00A6 300C02          245            jnb     SKRD, CALIBEND              ; ak sme dole, konci
                     246            ;jnb     MB2, CALIBEND               ; ak sme na poschodi, konci
00A9 80F8            247            jmp     CALIBLOOP
00AB                 248    CALIBEND:
00AB 753600          249            mov     FLOORREQ, #0                                
00AE C222            250            clr     FAST                        ; stojime
00B0 C221            251            clr     DOWN                        ;
00B2 D224            252            setb    FLED1
00B4 1203A7          253            lcall   WRITEPORTS                  ; zapis informaciu
                     254 +1         _BP_
00B7 C2B3            255 +1         clr     P3.3
00B9 D2AA            256 +1         setb    EX1
00BB 00              257 +1         nop
00BC 00              258 +1         nop
00BD                 260    MAIN:
                     261    
                     262    ;            |  7    |  6    |  5    |  4    |  3    |  2    |  1    |  0    |
                     263    ; ****************************************************************************
                     264    ; INPORTA >  |       |       |DOORCLS| PKI4  | PKI3  | PKI2  | PKI1  |STOPNOT|
                     265    ; ----------------------------------------------------------------------------
                     266    ; INPORTB >  | DPK   | DPZK  | DP    | SKRD  | SKRH  | MB2   | MB1   |       |
                     267    ; ----------------------------------------------------------------------------
                     268    ; INPORTC >  |       |       | PI4   | PI3D  | PI3U  | PI2D  | PI2U  | PI1   |
                     269    ; ****************************************************************************
                     270    ; OUTPORTA > |       |       |       | PKO4  | PKO3  | PKO2  | PKO1  | KS    |
                     271    ; ----------------------------------------------------------------------------
                     272    ; OUTPORTB > | FLED4 | FLED3 | FLED2 | FLED1 | SLOW  | FAST  | DOWN  | UP    |
                     273    ; ----------------------------------------------------------------------------
                     274    ; OUTPORTC > | LEDU  | LEDD  | PO4   | PO3D  | PO3U  | PO2D  | PO2U  | PO1   |
                     275    ; ****************************************************************************
                     276    ; POSITION
                     277    ; ****************************************************************************
                     278    
                     279    
                     280    ;------------------------------------------------------------------------------- << 1. posch
                                                                               odie >>
                     281    
00BD                 282    FLOOR1:
                     283 +1                 POLOHA_LED 1  ;-; Zhasni LEDKY,uz sme na poschodi (aj na paneli "Poloha kabi
                                                                               ny", nechaj len aktualne poschodie)
00BD C22F            284 +1         clr     LEDU            
00BF C22E            285 +1         clr     LEDD 
00C1 C224            286 +1         clr     FLED1             
VYTAH/ORI%Df&©4                                                                                              PAGE 6

00C3 C225            287 +1         clr     FLED2                
00C5 C226            288 +1         clr     FLED3           
00C7 C227            289 +1         clr     FLED4           
00C9 D224            290 +1         setb    FLED1
00CB 1203A7          291 +1         lcall   WRITEPORTS
00CE 120359          293            lcall   WAITFORTIMER    ; simulacia TIMERu
00D1 12036A          294    F1S:    lcall   READPORTS     ;-; nacitanie dat
00D4 C219            295            clr     PKO1          ;-; vynulovanie volby poschodia na ktorom stojim
00D6 1203A7          296            lcall   WRITEPORTS      ;
00D9 E528            297            mov     A, INPORTA      ; zistenie, cibolo stlacene nieco viac ako poschodie na ktor
                                                                               om stojim
00DB 541C            298            anl     A, #00011100b ;-;
00DD 60F2            299            jz      F1S           ;-; ak nie, opakuj
00DF D220            300            setb    UP              ; rychly pohyb hore
00E1 D222            301            setb    FAST            ; 
00E3 1203A7          302            lcall   WRITEPORTS      ; 
00E6 0200E9          303            jmp     UP1           ;-; prejdi do stavu UP1
00E9                 304    UP1:
                     305 +1                 POLOHA_LED 1  ;-; Zhasni LEDKY,uz sme na poschodi (aj na paneli "Poloha kabi
                                                                               ny", nechaj len aktualne poschodie)
00E9 C22F            306 +1         clr     LEDU            
00EB C22E            307 +1         clr     LEDD 
00ED C224            308 +1         clr     FLED1             
00EF C225            309 +1         clr     FLED2                
00F1 C226            310 +1         clr     FLED3           
00F3 C227            311 +1         clr     FLED4           
00F5 D224            312 +1         setb    FLED1
00F7 1203A7          313 +1         lcall   WRITEPORTS
00FA 12036A          315    UP1A:   lcall   READPORTS       ; nacitanie dat
00FD 200AFA          316            jb      MB2, UP1A     ;-; mame uz 1. spomalovaciu clonku?
0100 12036A          317            lcall   READPORTS       ; ak ano, sme z nej uz prec?
0103 300AFA          318            jnb     MB2, $-3        ;       
0106 D22E            319            setb    LEDD            ; Ak ano, rozsviet LEDku, ze mame prvu MB2 mame za sebou
0108 1203A7          320            lcall   WRITEPORTS      ;
010B 02010E          321            jmp     UP1_MB2       ;-; a prejdi do stavu UP1_MB2
010E                 322    UP1_MB2:
010E 12036A          323            lcall   READPORTS       ; nacitanie dat
0111 200AFA          324            jb      MB2, UP1_MB2  ;-; mame uz aj druhu spomalovaciu clonku?          
0114 D22F            325            setb    LEDU            ; Ak ano, rozsviet LEDku, ze mame druhu MB2
0116 1203A7          326            lcall   WRITEPORTS      ;
0119 02011C          327            jmp     UP1_MB1       ;-; a prejdi do stavu UP1_MB1 
011C                 328    UP1_MB1:
011C 12036A          329            lcall   READPORTS       ; nacitanie dat
011F 2009FA          330            jb      MB1, UP1_MB1  ;-; Sme na zastavovacej clonke?
0122 E528            331            mov     A, INPORTA      ; Ak ano, chceme tu zastavit? - je toto poschodie zvolene?
0124 5404            332            anl     A, #00000100b ;-;
0126 6069            333            jz      UP2           ;-; Ak nie, chod do stavu UP2
0128 C220            334            clr     UP              ; zastav motor
012A D23A            335            setb    UPOld           ;       (a zalohuj) 
012C C23B            336            clr     DOWNOld         ;       (a zalohuj)
012E C222            337            clr     FAST            ; 
0130 1203A7          338            lcall   WRITEPORTS      ; 
0133 020136          339            jmp     FLOOR2        ;-; a prejdi do stavu FLOOR2
                     340    
                     341    ;------------------------------------------------------------------------------- << 2. posch
                                                                               odie >>
                     342    
0136                 343    FLOOR2:
VYTAH/ORIDþ&©4                                                                                              PAGE 7

                     344 +1                 POLOHA_LED 2  ;-; Zhasni LEDKY,uz sme na poschodi (aj na paneli "Poloha kabi
                                                                               ny", nechaj len aktualne poschodie)
0136 C22F            345 +1         clr     LEDU            
0138 C22E            346 +1         clr     LEDD 
013A C224            347 +1         clr     FLED1             
013C C225            348 +1         clr     FLED2                
013E C226            349 +1         clr     FLED3           
0140 C227            350 +1         clr     FLED4           
0142 D225            351 +1         setb    FLED2
0144 1203A7          352 +1         lcall   WRITEPORTS
0147 120359          354            lcall   WAITFORTIMER    ; simulacia TIMERu
014A 12036A          355    F2S:    lcall   READPORTS     ;-; nacitanie dat
014D C21A            356            clr     PKO2          ;-; vynulovanie volby poschodia na ktorom stojim
014F 1203A7          357            lcall   WRITEPORTS      ;
                     358            
0152 7418            359            mov     A, #00011000b ;-; Default predpokladam, ze mam namierene hore (na 3. a 4.)
0154 203A01          360            jb      UPOld, F2OK     ; Je to pravda? Naozaj som doteraz isiel hore?
0157 F4              361            cpl     A               ;       Ak nie, znegujeme
0158 F5F0            362    F2OK:   mov     B, A            ; Masku dame do Bcka
                     363            
                     364            ; Pohyb v jednom smere (nevieme v ktorom)
015A 53F01A          365            anl     B, #00011010b  ;-; este ju kozmeticky upravime
015D E528            366            mov     A, INPORTA      ; zistenie, cibolo stlacene nieco viac ako poschodie na ktor
                                                                               om stojim
015F 55F0            367            anl     A, B            ; tu ju pouzijeme       
0161 7014            368            jnz     F2              ; nasli sme poschodie v tomto smere
                     369            ; Pohyb v opacnom smere (nevieme v ktorom)
0163 B23A            370            cpl     UPOld           ;  Znegujem stary posun
0165 B23B            371            cpl     DOWNOld         ;  |
0167 E5F0            372            mov     A, B            ;  Znegujeme masku
0169 F4              373            cpl     A               ;  |
016A F5F0            374            mov     B, A            ;  |
016C 53F01A          375            anl     B, #00011010b  ;-; este ju kozmeticky upravime
016F E528            376            mov     A, INPORTA      ; zistenie, cibolo stlacene nieco viac ako poschodie na ktor
                                                                               om stojim
0171 55F0            377            anl     A, B            ; tu ju pouzijeme       
0173 7002            378            jnz     F2              ; nasli sme poschodie v tomto smere
                     379            
0175 80D3            380            jmp     F2S           ;-; nemame sa kde hybat, tak opakujeme zistovanie
0177 203A03          381    F2:     jb      UPOld, F2UP     ;   
017A 020187          382            jmp     F2DOWN          ;
017D D220            383    F2UP:   setb    UP              ; rychly pohyb hore
017F D222            384            setb    FAST            ; 
0181 1203A7          385            lcall   WRITEPORTS      ; 
0184 020191          386            jmp     UP2           ;-; prejdi do stavu UP2    
0187 D221            387    F2DOWN: setb    DOWN            ; rychly pohyb hore
0189 D222            388            setb    FAST            ; 
018B 1203A7          389            lcall   WRITEPORTS      ; 
018E 02033E          390            jmp     DOWN2         ;-; prejdi do stavu UP2    
                     391            
                     392                
0191                 393    UP2:
                     394 +1                 POLOHA_LED 2  ;-; Zhasni LEDKY,uz sme na poschodi (aj na paneli "Poloha kabi
                                                                               ny", nechaj len aktualne poschodie)
0191 C22F            395 +1         clr     LEDU            
0193 C22E            396 +1         clr     LEDD 
0195 C224            397 +1         clr     FLED1             
0197 C225            398 +1         clr     FLED2                
VYTAH/ORI hDJ'©4                                                                                              PAGE 8

0199 C226            399 +1         clr     FLED3           
019B C227            400 +1         clr     FLED4           
019D D225            401 +1         setb    FLED2
019F 1203A7          402 +1         lcall   WRITEPORTS
01A2 12036A          404    UP2A:   lcall   READPORTS       ; nacitanie dat
01A5 200AFA          405            jb      MB2, UP2A     ;-; mame uz 1. spomalovaciu clonku?
01A8 12036A          406            lcall   READPORTS       ; ak ano, sme z nej uz prec?
01AB 300AFA          407            jnb     MB2, $-3        ;       
01AE D22E            408            setb    LEDD            ; Ak ano, rozsviet LEDku, ze mame prvu MB2 mame za sebou
01B0 1203A7          409            lcall   WRITEPORTS      ;
01B3 0201B6          410            jmp     UP2_MB2       ;-; a prejdi do stavu UP2_MB2
01B6                 411    UP2_MB2:
01B6 12036A          412            lcall   READPORTS       ; nacitanie dat
01B9 200AFA          413            jb      MB2, UP2_MB2  ;-; mame uz aj druhu spomalovaciu clonku?          
01BC D22F            414            setb    LEDU            ; Ak ano, rozsviet LEDku, ze mame druhu MB2
01BE 1203A7          415            lcall   WRITEPORTS      ;
01C1 0201C4          416            jmp     UP2_MB1       ;-; a prejdi do stavu UP2_MB1 
01C4                 417    UP2_MB1:
01C4 12036A          418            lcall   READPORTS       ; nacitanie dat
01C7 2009FA          419            jb      MB1, UP2_MB1  ;-; Sme na zastavovacej clonke?
01CA E528            420            mov     A, INPORTA      ; Ak ano, chceme tu zastavit? - je toto poschodie zvolene?
01CC 5408            421            anl     A, #00001000b ;-;
01CE 6065            422            jz      UP3           ;-; Ak nie, chod do stavu UP3
01D0 C220            423            clr     UP              ; zastav motor
01D2 C222            424            clr     FAST            ; 
01D4 1203A7          425            lcall   WRITEPORTS      ; 
01D7 0201DA          426            jmp     FLOOR3        ;-; a prejdi do stavu FLOOR3
                     427    
                     428    ;------------------------------------------------------------------------------- << 3. posch
                                                                               odie >>
                     429    
01DA                 430    FLOOR3:
                     431 +1                 POLOHA_LED 3  ;-; Zhasni LEDKY,uz sme na poschodi (aj na paneli "Poloha kabi
                                                                               ny", nechaj len aktualne poschodie)
01DA C22F            432 +1         clr     LEDU            
01DC C22E            433 +1         clr     LEDD 
01DE C224            434 +1         clr     FLED1             
01E0 C225            435 +1         clr     FLED2                
01E2 C226            436 +1         clr     FLED3           
01E4 C227            437 +1         clr     FLED4           
01E6 D226            438 +1         setb    FLED3
01E8 1203A7          439 +1         lcall   WRITEPORTS
01EB 120359          441            lcall   WAITFORTIMER    ; simulacia TIMERu
01EE 12036A          442    F3S:    lcall   READPORTS     ;-; nacitanie dat
01F1 C21B            443            clr     PKO3          ;-; vynulovanie volby poschodia na ktorom stojim
01F3 1203A7          444            lcall   WRITEPORTS      ;
                     445    
01F6 7410            446            mov     A, #00010000b ;-; Default predpokladam, ze idem hore (na 4.)
01F8 203A01          447            jb      UPOld, F3OK      ;-; Je to pravda? Naozaj idem hore?
01FB F4              448            cpl     A               ;       Ak nie, znegujeme
01FC F5F0            449    F3OK:   mov     B, A            ; Masku dame do Bcka
                     450            
                     451            ; Pohyb v jednom smere (nevieme v ktorom)
01FE 53F016          452            anl     B, #00010110b  ;-; este ju kozmeticky upravime
0201 E528            453            mov     A, INPORTA      ; zistenie, cibolo stlacene nieco viac ako poschodie na ktor
                                                                               om stojim
0203 55F0            454            anl     A, B            ; tu ju pouzijeme       
0205 7014            455            jnz     F3              ; nasli sme poschodie v tomto smere
VYTAH/ORITD–'©4                                                                                              PAGE 9

                     456            ; Pohyb v opacnom smere (nevieme v ktorom)
0207 B23A            457            cpl     UPOld           ;  Znegujem stary posun
0209 B23B            458            cpl     DOWNOld         ;  |
020B E5F0            459            mov     A, B            ;  Znegujeme masku
020D F4              460            cpl     A               ;  |
020E F5F0            461            mov     B, A            ;  |
0210 53F016          462            anl     B, #00010110b  ;-; este ju kozmeticky upravime
0213 E528            463            mov     A, INPORTA      ; zistenie, cibolo stlacene nieco viac ako poschodie na ktor
                                                                               om stojim
0215 55F0            464            anl     A, B            ; tu ju pouzijeme       
0217 7002            465            jnz     F3              ; nasli sme poschodie v tomto smere
                     466            
0219 80D3            467            jmp     F3S           ;-; nemame sa kde hybat, tak opakujeme zistovanie
021B 203A03          468    F3:     jb      UPOld, F3UP     ;   
021E 02022B          469            jmp     F3DOWN          ;
0221 D220            470    F3UP:   setb    UP              ; rychly pohyb hore
0223 D222            471            setb    FAST            ; 
0225 1203A7          472            lcall   WRITEPORTS      ; 
0228 020235          473            jmp     UP3           ;-; prejdi do stavu UP2    
022B D221            474    F3DOWN: setb    DOWN            ; rychly pohyb hore
022D D222            475            setb    FAST            ; 
022F 1203A7          476            lcall   WRITEPORTS      ; 
0232 020278          477            jmp     DOWN3         ;-; prejdi do stavu UP2    
                     478    
                     479            
                     480            
                     481            
                     482    ;        mov     A, INPORTA      ; zistenie, cibolo stlacene nieco viac ako poschodie na kto
                                                                               rom stojim
                     483    ;        anl     A, #00010000b ;-;
                     484    ;        jz      F3S           ;-; ak nie, opakuj
                     485    ;        setb    UP              ; rychly pohyb hore
                     486    ;        setb    FAST            ; 
                     487    ;        lcall   WRITEPORTS      ; 
                     488    ;        jmp     UP3           ;-; prejdi do stavu UP3        
0235                 489    UP3:
                     490 +1                 POLOHA_LED 3  ;-; Zhasni LEDKY,uz sme na poschodi (aj na paneli "Poloha kabi
                                                                               ny", nechaj len aktualne poschodie)
0235 C22F            491 +1         clr     LEDU            
0237 C22E            492 +1         clr     LEDD 
0239 C224            493 +1         clr     FLED1             
023B C225            494 +1         clr     FLED2                
023D C226            495 +1         clr     FLED3           
023F C227            496 +1         clr     FLED4           
0241 D226            497 +1         setb    FLED3
0243 1203A7          498 +1         lcall   WRITEPORTS
0246 12036A          500    UP3A:   lcall   READPORTS       ; nacitanie dat
0249 200AFA          501            jb      MB2, UP3A     ;-; mame uz 1. spomalovaciu clonku?
024C 12036A          502            lcall   READPORTS       ; ak ano, sme z nej uz prec?
024F 300AFA          503            jnb     MB2, $-3        ;       
0252 D22E            504            setb    LEDD            ; Ak ano, rozsviet LEDku, ze mame prvu MB2 mame za sebou
0254 1203A7          505            lcall   WRITEPORTS      ;
0257 02025A          506            jmp     UP3_MB2       ;-; a prejdi do stavu UP3_MB2
025A                 507    UP3_MB2:
025A 12036A          508            lcall   READPORTS       ; nacitanie dat
025D 200AFA          509            jb      MB2, UP3_MB2  ;-; mame uz aj druhu spomalovaciu clonku?          
0260 D22F            510            setb    LEDU            ; Ak ano, rozsviet LEDku, ze mame druhu MB2
0262 1203A7          511            lcall   WRITEPORTS      ;
VYTAH/ORI5Dâ'©4                                                                                              PAGE 10

0265 020268          512            jmp     UP3_MB1       ;-; a prejdi do stavu UP3_MB1 
0268                 513    UP3_MB1:
0268 12036A          514            lcall   READPORTS       ; nacitanie dat
026B 2009FA          515            jb      MB1, UP3_MB1  ;-; Sme na zastavovacej clonke? (tu zastavujeme v kazdom pripa
                                                                               de)
026E C220            516            clr     UP              ; zastav motor
0270 C222            517            clr     FAST            ; 
0272 1203A7          518            lcall   WRITEPORTS      ; 
0275 0202C7          519            jmp     FLOOR4        ;-; a prejdi do stavu FLOOR4   
0278                 520    DOWN3:
                     521 +1                 POLOHA_LED 3  ;-; Zhasni LEDKY,uz sme na poschodi (aj na paneli "Poloha kabi
                                                                               ny", nechaj len aktualne poschodie)
0278 C22F            522 +1         clr     LEDU            
027A C22E            523 +1         clr     LEDD 
027C C224            524 +1         clr     FLED1             
027E C225            525 +1         clr     FLED2                
0280 C226            526 +1         clr     FLED3           
0282 C227            527 +1         clr     FLED4           
0284 D226            528 +1         setb    FLED3
0286 1203A7          529 +1         lcall   WRITEPORTS
0289 12036A          531            lcall   READPORTS       ; nacitanie dat
028C 200AE9          532            jb      MB2, DOWN3    ;-; mame uz 1. spomalovaciu clonku?
028F 12036A          533            lcall   READPORTS       ; ak ano, sme z nej uz prec?
0292 300AFA          534            jnb     MB2, $-3        ;       
0295 D22F            535            setb    LEDU            ; Ak ano, rozsviet LEDku, ze mame prvu MB2 mame za sebou
0297 1203A7          536            lcall   WRITEPORTS      ;
029A 02029D          537            jmp     DOWN3_MB2     ;-; a prejdi do stavu DOWN3_MB2
029D                 538    DOWN3_MB2:
029D 12036A          539            lcall   READPORTS       ; nacitanie dat
02A0 200AFA          540            jb      MB2, DOWN3_MB2;-; mame uz aj druhu spomalovaciu clonku?          
02A3 D22E            541            setb    LEDD            ; Ak ano, rozsviet LEDku, ze mame druhu MB2
02A5 1203A7          542            lcall   WRITEPORTS      ;
02A8 0202AB          543            jmp     DOWN3_MB1     ;-; a prejdi do stavu DOWN3_MB1
02AB                 544    DOWN3_MB1:    
02AB 12036A          545            lcall   READPORTS       ; nacitanie dat
02AE 2009FA          546            jb      MB1, DOWN3_MB1;-; Sme na zastavovacej clonke?
02B1 E528            547            mov     A, INPORTA      ; Ak ano, chceme tu zastavit? - je toto poschodie zvolene?
02B3 5404            548            anl     A, #00000100b ;-;
02B5 7003            549            jnz     D3_MB1C         ; Ak nie, chod do stavu DOWN2
02B7 02033E          550            ljmp    DOWN2         ;-; |
02BA C221            551    D3_MB1C:clr     DOWN            ; zastav motor
02BC D23B            552            setb    DOWNOld         ;       (a zalohuj)
02BE C23A            553            clr     UPOld           ;       (a zalohuj)
02C0 C222            554            clr     FAST            ; 
02C2 1203A7          555            lcall   WRITEPORTS      ; 
02C5 2136            556            jmp     FLOOR2        ;-; a prejdi do stavu FLOOR2      
                     557          
                     558            
                     559    ;------------------------------------------------------------------------------- << 4. posch
                                                                               odie >>
                     560    
02C7                 561    FLOOR4:
                     562 +1                 POLOHA_LED 4  ;-; Zhasni LEDKY,uz sme na poschodi (aj na paneli "Poloha kabi
                                                                               ny", nechaj len aktualne poschodie)
02C7 C22F            563 +1         clr     LEDU            
02C9 C22E            564 +1         clr     LEDD 
02CB C224            565 +1         clr     FLED1             
02CD C225            566 +1         clr     FLED2                
VYTAH/ORI Dz(©4                                                                                              PAGE 11

02CF C226            567 +1         clr     FLED3           
02D1 C227            568 +1         clr     FLED4           
02D3 D227            569 +1         setb    FLED4
02D5 1203A7          570 +1         lcall   WRITEPORTS
02D8 120359          572            lcall   WAITFORTIMER    ; simulacia TIMERu
02DB 12036A          573    F4S:    lcall   READPORTS     ;-; nacitanie dat
02DE C21C            574            clr     PKO4          ;-; vynulovanie volby poschodia na ktorom stojim
02E0 1203A7          575            lcall   WRITEPORTS      ;
02E3 E528            576            mov     A, INPORTA      ; zistenie, cibolo stlacene nieco menej ako poschodie na kto
                                                                               rom stojim
02E5 540E            577            anl     A, #00001110b ;-;
02E7 60F2            578            jz      F4S           ;-; ak nie, opakuj
02E9 D221            579            setb    DOWN            ; rychly pohyb dole
02EB D222            580            setb    FAST            ; 
02ED 1203A7          581            lcall   WRITEPORTS      ; 
02F0 0202F3          582            jmp     DOWN4         ;-; prejdi do stavu DOWN4 
02F3                 583    DOWN4:
                     584 +1                 POLOHA_LED 4  ;-; Zhasni LEDKY,uz sme na poschodi (aj na paneli "Poloha kabi
                                                                               ny", nechaj len aktualne poschodie)
02F3 C22F            585 +1         clr     LEDU            
02F5 C22E            586 +1         clr     LEDD 
02F7 C224            587 +1         clr     FLED1             
02F9 C225            588 +1         clr     FLED2                
02FB C226            589 +1         clr     FLED3           
02FD C227            590 +1         clr     FLED4           
02FF D227            591 +1         setb    FLED4
0301 1203A7          592 +1         lcall   WRITEPORTS
0304 12036A          594            lcall   READPORTS       ; nacitanie dat
0307 200AE9          595            jb      MB2, DOWN4    ;-; mame uz 1. spomalovaciu clonku?
030A 12036A          596            lcall   READPORTS       ; ak ano, sme z nej uz prec?
030D 300AFA          597            jnb     MB2, $-3        ;       
0310 D22F            598            setb    LEDU            ; Ak ano, rozsviet LEDku, ze mame prvu MB2 mame za sebou
0312 1203A7          599            lcall   WRITEPORTS      ;
0315 020318          600            jmp     DOWN4_MB2     ;-; a prejdi do stavu DOWN4_MB2
0318                 601    DOWN4_MB2:
0318 12036A          602            lcall   READPORTS       ; nacitanie dat
031B 200AFA          603            jb      MB2, DOWN4_MB2;-; mame uz aj druhu spomalovaciu clonku?          
031E D22E            604            setb    LEDD            ; Ak ano, rozsviet LEDku, ze mame druhu MB2
0320 1203A7          605            lcall   WRITEPORTS      ;
0323 020326          606            jmp     DOWN4_MB1     ;-; a prejdi do stavu DOWN4_MB1
0326                 607    DOWN4_MB1:    
0326 12036A          608            lcall   READPORTS       ; nacitanie dat
0329 2009FA          609            jb      MB1, DOWN4_MB1;-; Sme na zastavovacej clonke?
032C E528            610            mov     A, INPORTA      ; Ak ano, chceme tu zastavit? - je toto poschodie zvolene?
032E 5408            611            anl     A, #00001000b ;-;
0330 7003            612            jnz     D4_MB1C         ; Ak nie, chod do stavu DOWN3
0332 020278          613            ljmp    DOWN3         ;-; |
0335 C221            614    D4_MB1C:clr     DOWN            ; zastav motor
0337 C222            615            clr     FAST            ; 
0339 1203A7          616            lcall   WRITEPORTS      ; 
033C 21DA            617            jmp     FLOOR3        ;-; a prejdi do stavu FLOOR3                 
                     618                    
                     619      
033E                 620    DOWN2: 
033E C221            621            clr     DOWN            ; zastav motor
0340 C222            622            clr     FAST            ; 
0342 1203A7          623            lcall   WRITEPORTS      ; 
                     624 +1         _BP_
VYTAH/ORID                                                                                                  PAGE 12

0345 C2B3            625 +1         clr     P3.3
0347 D2AA            626 +1         setb    EX1
0349 00              627 +1         nop
034A 00              628 +1         nop
034B 00              630            nop
034C 00              631            nop             
                     632                    
                     633                    
034D                 634    ENDPROG:
034D D218            635            setb    KS
034F 1203A7          636            call    WRITEPORTS                ; zapis novu informaciu
                     637 +1         _BP_
0352 C2B3            638 +1         clr     P3.3
0354 D2AA            639 +1         setb    EX1
0356 00              640 +1         nop
0357 00              641 +1         nop
0358 22              643            ret
                     644    
                     645    
                     646    ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                     647    ; WAITFORTIMER
                     648    ; Pocka na stlacenie tlacidla na 1. poschodi  - signal PO1 (v buducnosti to 
                     649    ; bude timer)
                     650    ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
0359                 651    WAITFORTIMER:
0359 D22C            652            setb    PO3U                        ; rozsvieti indikator cakania (poschodie 4)
035B 1203A7          653            lcall   WRITEPORTS                  ;
035E 12036A          654    WAIT:   lcall   READPORTS                   ; 
0361 3013F5          655            jnb     PI3D, WAITFORTIMER          ; ak nebolo stlacene tlacidlo PO1, cakaj 
0364 C22C            656            clr     PO3U                         ; zhasne indikator cakania (poschodie 4)
0366 1203A7          657            lcall   WRITEPORTS
0369 22              658            ret
                     659    
                     660    
                     661    ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                     662    ; READPORTS
                     663    ; precita nove hodnoty na portoch
                     664    ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
036A                 665    READPORTS:
036A 75A080          666            mov     p2, #i8255INA       ; citaj data z portu A
036D 75803F          667            mov     p0, #(bmSTOP or bmPKI1 or bmPKI2 or bmPKI3 or bmPKI4 or bmDOORCLSD)
0370 C2B7            668            clr     RDNOT
0372 00              669            nop
0373 00              670            nop
0374 00              671            nop
0375 00              672            nop
0376 858028          673            mov     INPORTA, p0         ; uloz informaciu z datovej zbernice 
0379 D2B7            674            setb    RDNOT
                     675            
037B 75A081          676            mov     p2, #i8255INB       ; citaj data z portu B
037E 7580FE          677            mov     p0, #(bmMB1I or bmMB2I or bmSKRHI or bmSKRHD or bmDPI or bmDPKI or bmDPZKI)
                                                                               
0381 C2B7            678            clr     RDNOT
0383 00              679            nop
0384 00              680            nop
0385 00              681            nop
0386 00              682            nop
0387 858021          683            mov     INPORTB, p0         ; uloz informaciu z datovej zbernice 
VYTAH/ORIYD                                                                                                  PAGE 13

038A D2B7            684            setb    RDNOT
                     685    
038C 75A082          686            mov     p2, #i8255INC       ; citaj data z portu C
038F 75803F          687            mov     p0, #(bmPI1 or bmPI2D or bmPI2U or bmPI3D or bmPI3U or bmPI4)
0392 C2B7            688            clr     RDNOT
0394 00              689            nop
0395 00              690            nop
0396 00              691            nop
0397 00              692            nop
0398 858022          693            mov     INPORTC, p0         ; uloz informaciu z datovej zbernice 
039B D2B7            694            setb    RDNOT
                     695            
                     696            
039D E528            697            mov     A, INPORTA
039F 541E            698            anl     A, #00011110b
03A1 4223            699            orl     OUTPORTA, A
03A3 1203A7          700            call    WRITEPORTS              ; aktualizuj signalizaciu na ovladacom paneli
                     701            
03A6 22              702            ret
                     703            
                     704    ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                     705    ; WRITEPORTS
                     706    ; spravi zalohu vystupnych registrov a posle data von
                     707    ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
03A7                 708    WRITEPORTS:
03A7 852380          709            mov     p0, OUTPORTA        ; teraz postupne posli data najprv na port A,
03AA 75A0C0          710            mov     p2, #i8255OUTA
03AD C2B6            711            clr     WRNOT
03AF 00              712            nop
03B0 00              713            nop
03B1 00              714            nop
03B2 00              715            nop
03B3 D2B6            716            setb    WRNOT
                     717            
03B5 852480          718            mov     p0, OUTPORTB        ; potom port B
03B8 75A0C1          719            mov     p2, #i8255OUTB
03BB C2B6            720            clr     WRNOT
03BD 00              721            nop
03BE 00              722            nop
03BF 00              723            nop
03C0 00              724            nop
03C1 D2B6            725            setb    WRNOT
                     726    
03C3 852580          727            mov     p0, OUTPORTC        ; a nakoniec port C
03C6 75A0C2          728            mov     p2, #i8255OUTC
03C9 C2B6            729            clr     WRNOT
03CB 00              730            nop
03CC 00              731            nop
03CD 00              732            nop
03CE 00              733            nop
03CF D2B6            734            setb    WRNOT
                     735            
03D1 22              736            ret
                     737    
                     738    ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                     739    
03D2 0D0A5269        740    STR_INIT:   db  0dh, 0ah, 'Riadiaci system je inicializovany.', 0dh, 0ah, 00h
03D6 61646961   
VYTAH/ORID                                                                                                  PAGE 14

03DA 63692073   
03DE 79737465   
03E2 6D206A65   
03E6 20696E69   
03EA 6369616C   
03EE 697A6F76   
03F2 616E792E   
03F6 0D0A00     
03F9 52696164        741    STR_STOP:   db  'Riadiaci system je reinicializovany po stlaceni tlacidla STOP.', 0dh, 0ah, 
                                                                               00h
03FD 69616369   
0401 20737973   
0405 74656D20   
0409 6A652072   
040D 65696E69   
0411 6369616C   
0415 697A6F76   
0419 616E7920   
041D 706F2073   
0421 746C6163   
0425 656E6920   
0429 746C6163   
042D 69646C61   
0431 2053544F   
0435 502E0D0A   
0439 00         
043A 4B616C69        742    STR_CALIB:  db  'Kalibracia vytahu je ukoncena.', 0dh, 0ah, 00h
043E 62726163   
0442 69612076   
0446 79746168   
044A 75206A65   
044E 20756B6F   
0452 6E63656E   
0456 612E0D0A   
045A 00         
                     743    
----                 744            DSEG
0040                 745            org     40h
0040                 746    STACK:  DS      10h
                     747    
                     748    end

VERSION 1.2h ASSEMBLY COMPLETE, 0 ERRORS FOUND
VYTAH/ORI                                                                                                     PAGE 15

B. . . . . . . . . . . . . . . .  D ADDR  00F0H  PREDEFINED  
BMDOORCLSD . . . . . . . . . . .    NUMB  0020H  
BMDOWN . . . . . . . . . . . . .    NUMB  0002H  NOT USED  
BMDPI. . . . . . . . . . . . . .    NUMB  0020H  
BMDPKI . . . . . . . . . . . . .    NUMB  0080H  
BMDPZKI. . . . . . . . . . . . .    NUMB  0040H  
BMFAST . . . . . . . . . . . . .    NUMB  0004H  NOT USED  
BMFLED1. . . . . . . . . . . . .    NUMB  0010H  
BMFLED2. . . . . . . . . . . . .    NUMB  0020H  
BMFLED3. . . . . . . . . . . . .    NUMB  0040H  
BMFLED4. . . . . . . . . . . . .    NUMB  0080H  
BMKS . . . . . . . . . . . . . .    NUMB  0001H  NOT USED  
BMLEDD . . . . . . . . . . . . .    NUMB  0040H  
BMLEDU . . . . . . . . . . . . .    NUMB  0080H  
BMMB1I . . . . . . . . . . . . .    NUMB  0002H  
BMMB2I . . . . . . . . . . . . .    NUMB  0004H  
BMPI1. . . . . . . . . . . . . .    NUMB  0001H  
BMPI2D . . . . . . . . . . . . .    NUMB  0002H  
BMPI2U . . . . . . . . . . . . .    NUMB  0004H  
BMPI3D . . . . . . . . . . . . .    NUMB  0008H  
BMPI3U . . . . . . . . . . . . .    NUMB  0010H  
BMPI4. . . . . . . . . . . . . .    NUMB  0020H  
BMPKI1 . . . . . . . . . . . . .    NUMB  0002H  
BMPKI2 . . . . . . . . . . . . .    NUMB  0004H  
BMPKI3 . . . . . . . . . . . . .    NUMB  0008H  
BMPKI4 . . . . . . . . . . . . .    NUMB  0010H  
BMPKO1 . . . . . . . . . . . . .    NUMB  0002H  
BMPKO2 . . . . . . . . . . . . .    NUMB  0004H  
BMPKO3 . . . . . . . . . . . . .    NUMB  0008H  
BMPKO4 . . . . . . . . . . . . .    NUMB  0010H  
BMPO1. . . . . . . . . . . . . .    NUMB  0001H  
BMPO2D . . . . . . . . . . . . .    NUMB  0002H  
BMPO2U . . . . . . . . . . . . .    NUMB  0004H  
BMPO3D . . . . . . . . . . . . .    NUMB  0008H  
BMPO3U . . . . . . . . . . . . .    NUMB  0010H  
BMPO4. . . . . . . . . . . . . .    NUMB  0020H  
BMSKRHD. . . . . . . . . . . . .    NUMB  0010H  
BMSKRHI. . . . . . . . . . . . .    NUMB  0008H  
BMSLOW . . . . . . . . . . . . .    NUMB  0008H  NOT USED  
BMSTOP . . . . . . . . . . . . .    NUMB  0001H  
BMUP . . . . . . . . . . . . . .    NUMB  0001H  NOT USED  
CALIB. . . . . . . . . . . . . .  C ADDR  0096H  NOT USED  
CALIBEND . . . . . . . . . . . .  C ADDR  00ABH  
CALIBLOOP. . . . . . . . . . . .  C ADDR  00A3H  
CANGO. . . . . . . . . . . . . .  B ADDR  0038H  NOT USED  
CTRLREG. . . . . . . . . . . . .  D ADDR  0027H  
D3_MB1C. . . . . . . . . . . . .  C ADDR  02BAH  
D4_MB1C. . . . . . . . . . . . .  C ADDR  0335H  
DOORCLSD . . . . . . . . . . . .  B ADDR  0045H  NOT USED  
DOORCLSDOLD. . . . . . . . . . .  B ADDR  0039H  NOT USED  
DOWN . . . . . . . . . . . . . .  B ADDR  0021H  
DOWN2. . . . . . . . . . . . . .  C ADDR  033EH  
DOWN3. . . . . . . . . . . . . .  C ADDR  0278H  
DOWN3_MB1. . . . . . . . . . . .  C ADDR  02ABH  
DOWN3_MB2. . . . . . . . . . . .  C ADDR  029DH  
DOWN4. . . . . . . . . . . . . .  C ADDR  02F3H  
DOWN4_MB1. . . . . . . . . . . .  C ADDR  0326H  
DOWN4_MB2. . . . . . . . . . . .  C ADDR  0318H  
VYTAH/ORI                                                                                                     PAGE 16

DOWNOLD. . . . . . . . . . . . .  B ADDR  003BH  
DP . . . . . . . . . . . . . . .  B ADDR  000DH  NOT USED  
DPK. . . . . . . . . . . . . . .  B ADDR  000FH  NOT USED  
DPZK . . . . . . . . . . . . . .  B ADDR  000EH  NOT USED  
ENDPROG. . . . . . . . . . . . .  C ADDR  034DH  NOT USED  
EX1. . . . . . . . . . . . . . .  B ADDR  00AAH  PREDEFINED  
F1S. . . . . . . . . . . . . . .  C ADDR  00D1H  
F2 . . . . . . . . . . . . . . .  C ADDR  0177H  
F2DOWN . . . . . . . . . . . . .  C ADDR  0187H  
F2OK . . . . . . . . . . . . . .  C ADDR  0158H  
F2S. . . . . . . . . . . . . . .  C ADDR  014AH  
F2UP . . . . . . . . . . . . . .  C ADDR  017DH  
F3 . . . . . . . . . . . . . . .  C ADDR  021BH  
F3DOWN . . . . . . . . . . . . .  C ADDR  022BH  
F3OK . . . . . . . . . . . . . .  C ADDR  01FCH  
F3S. . . . . . . . . . . . . . .  C ADDR  01EEH  
F3UP . . . . . . . . . . . . . .  C ADDR  0221H  
F4S. . . . . . . . . . . . . . .  C ADDR  02DBH  
FAST . . . . . . . . . . . . . .  B ADDR  0022H  
FASTOLD. . . . . . . . . . . . .  B ADDR  003CH  NOT USED  
FLED1. . . . . . . . . . . . . .  B ADDR  0024H  
FLED2. . . . . . . . . . . . . .  B ADDR  0025H  
FLED3. . . . . . . . . . . . . .  B ADDR  0026H  
FLED4. . . . . . . . . . . . . .  B ADDR  0027H  
FLOOR1 . . . . . . . . . . . . .  C ADDR  00BDH  NOT USED  
FLOOR2 . . . . . . . . . . . . .  C ADDR  0136H  
FLOOR3 . . . . . . . . . . . . .  C ADDR  01DAH  
FLOOR4 . . . . . . . . . . . . .  C ADDR  02C7H  
FLOORREQ . . . . . . . . . . . .  D ADDR  0036H  
HIGHEST. . . . . . . . . . . . .  D ADDR  0032H  NOT USED  
I8255INA . . . . . . . . . . . .    NUMB  0080H  
I8255INB . . . . . . . . . . . .    NUMB  0081H  
I8255INC . . . . . . . . . . . .    NUMB  0082H  
I8255INCW. . . . . . . . . . . .    NUMB  0083H  
I8255OUTA. . . . . . . . . . . .    NUMB  00C0H  
I8255OUTB. . . . . . . . . . . .    NUMB  00C1H  
I8255OUTC. . . . . . . . . . . .    NUMB  00C2H  
I8255OUTCW . . . . . . . . . . .    NUMB  00C3H  
INPORTA. . . . . . . . . . . . .  D ADDR  0028H  
INPORTB. . . . . . . . . . . . .  D ADDR  0021H  
INPORTBOLD . . . . . . . . . . .  D ADDR  0026H  
INPORTC. . . . . . . . . . . . .  D ADDR  0022H  
KS . . . . . . . . . . . . . . .  B ADDR  0018H  
LEDD . . . . . . . . . . . . . .  B ADDR  002EH  
LEDU . . . . . . . . . . . . . .  B ADDR  002FH  
LOWEST . . . . . . . . . . . . .  D ADDR  0031H  NOT USED  
MAIN . . . . . . . . . . . . . .  C ADDR  00BDH  NOT USED  
MB1. . . . . . . . . . . . . . .  B ADDR  0009H  
MB1OLD . . . . . . . . . . . . .  B ADDR  0031H  NOT USED  
MB2. . . . . . . . . . . . . . .  B ADDR  000AH  
MB2OLD . . . . . . . . . . . . .  B ADDR  0032H  NOT USED  
OUTPORTA . . . . . . . . . . . .  D ADDR  0023H  
OUTPORTB . . . . . . . . . . . .  D ADDR  0024H  
OUTPORTBOLD. . . . . . . . . . .  D ADDR  0034H  NOT USED  
OUTPORTC . . . . . . . . . . . .  D ADDR  0025H  
P0 . . . . . . . . . . . . . . .  D ADDR  0080H  PREDEFINED  
P2 . . . . . . . . . . . . . . .  D ADDR  00A0H  PREDEFINED  
P3 . . . . . . . . . . . . . . .  D ADDR  00B0H  PREDEFINED  
VYTAH/ORI                                                                                                     PAGE 17

PI1. . . . . . . . . . . . . . .  B ADDR  0010H  NOT USED  
PI2D . . . . . . . . . . . . . .  B ADDR  0011H  NOT USED  
PI2U . . . . . . . . . . . . . .  B ADDR  0012H  NOT USED  
PI3D . . . . . . . . . . . . . .  B ADDR  0013H  
PI3U . . . . . . . . . . . . . .  B ADDR  0014H  NOT USED  
PI4. . . . . . . . . . . . . . .  B ADDR  0015H  NOT USED  
PKI1 . . . . . . . . . . . . . .  B ADDR  0041H  NOT USED  
PKI2 . . . . . . . . . . . . . .  B ADDR  0042H  NOT USED  
PKI3 . . . . . . . . . . . . . .  B ADDR  0043H  NOT USED  
PKI4 . . . . . . . . . . . . . .  B ADDR  0044H  NOT USED  
PKO1 . . . . . . . . . . . . . .  B ADDR  0019H  
PKO2 . . . . . . . . . . . . . .  B ADDR  001AH  
PKO3 . . . . . . . . . . . . . .  B ADDR  001BH  
PKO4 . . . . . . . . . . . . . .  B ADDR  001CH  
PO1. . . . . . . . . . . . . . .  B ADDR  0028H  NOT USED  
PO2D . . . . . . . . . . . . . .  B ADDR  0029H  NOT USED  
PO2U . . . . . . . . . . . . . .  B ADDR  002AH  NOT USED  
PO3D . . . . . . . . . . . . . .  B ADDR  002BH  NOT USED  
PO3U . . . . . . . . . . . . . .  B ADDR  002CH  
PO4. . . . . . . . . . . . . . .  B ADDR  002DH  NOT USED  
POSITION . . . . . . . . . . . .  D ADDR  0030H  NOT USED  
RDNOT. . . . . . . . . . . . . .  B ADDR  00B7H  
READPORTS. . . . . . . . . . . .  C ADDR  036AH  
RESET. . . . . . . . . . . . . .  C ADDR  0033H  NOT USED  
SKRD . . . . . . . . . . . . . .  B ADDR  000CH  
SKRDOLD. . . . . . . . . . . . .  B ADDR  0034H  NOT USED  
SKRH . . . . . . . . . . . . . .  B ADDR  000BH  NOT USED  
SKRHOLD. . . . . . . . . . . . .  B ADDR  0033H  NOT USED  
SLOW . . . . . . . . . . . . . .  B ADDR  0023H  NOT USED  
SLOWOLD. . . . . . . . . . . . .  B ADDR  003DH  NOT USED  
SP . . . . . . . . . . . . . . .  D ADDR  0081H  PREDEFINED  
STACK. . . . . . . . . . . . . .  D ADDR  0040H  
START. . . . . . . . . . . . . .  C ADDR  0033H  
STOPNOT. . . . . . . . . . . . .  B ADDR  0040H  NOT USED  
STOPTIMER. . . . . . . . . . . .  D ADDR  0033H  
STR_CALIB. . . . . . . . . . . .  C ADDR  043AH  NOT USED  
STR_INIT . . . . . . . . . . . .  C ADDR  03D2H  NOT USED  
STR_STOP . . . . . . . . . . . .  C ADDR  03F9H  NOT USED  
TIMERCONST . . . . . . . . . . .    NUMB  00FAH  NOT USED  
UP . . . . . . . . . . . . . . .  B ADDR  0020H  
UP1. . . . . . . . . . . . . . .  C ADDR  00E9H  
UP1A . . . . . . . . . . . . . .  C ADDR  00FAH  
UP1_MB1. . . . . . . . . . . . .  C ADDR  011CH  
UP1_MB2. . . . . . . . . . . . .  C ADDR  010EH  
UP2. . . . . . . . . . . . . . .  C ADDR  0191H  
UP2A . . . . . . . . . . . . . .  C ADDR  01A2H  
UP2_MB1. . . . . . . . . . . . .  C ADDR  01C4H  
UP2_MB2. . . . . . . . . . . . .  C ADDR  01B6H  
UP3. . . . . . . . . . . . . . .  C ADDR  0235H  
UP3A . . . . . . . . . . . . . .  C ADDR  0246H  
UP3_MB1. . . . . . . . . . . . .  C ADDR  0268H  
UP3_MB2. . . . . . . . . . . . .  C ADDR  025AH  
UPOLD. . . . . . . . . . . . . .  B ADDR  003AH  
WAIT . . . . . . . . . . . . . .  C ADDR  035EH  NOT USED  
WAITFORTIMER . . . . . . . . . .  C ADDR  0359H  
WRITEPORTS . . . . . . . . . . .  C ADDR  03A7H  
WRNOT. . . . . . . . . . . . . .  B ADDR  00B6H  
